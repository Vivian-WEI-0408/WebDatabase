{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>ÁîüÁâ©ÂÖÉ‰ª∂‰ªìÂ∫ì</title>
    <link href="{% static 'LabDatabase/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <script src="{% static 'LabDatabase/bootstrap.bundle.min.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --border-color: #dee2e6;
        }
        
        body {
            background-color: #f5f7fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #4a6491);
            color: white;
            padding: 25px 30px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
        }

        .header-container{
            display:flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            width:100%;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            margin-bottom: 0;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            overflow: hidden;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            padding: 20px 25px;
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0;
        }
        
        .card-body {
            padding: 25px;
        }
        
        .nav-tabs {
            border-bottom: 2px solid var(--border-color);
            padding: 0 10px;
        }
        
        .nav-tabs .nav-link {
            border: none;
            padding: 12px 25px;
            font-weight: 500;
            color: #6c757d;
            border-radius: 8px 8px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .nav-tabs .nav-link:hover {
            background-color: #f8f9fa;
            color: var(--primary-color);
        }
        
        .nav-tabs .nav-link.active {
            background-color: white;
            color: var(--primary-color);
            border-bottom: 3px solid var(--secondary-color);
        }
        
        .tab-content {
            background-color: white;
            padding: 0;
        }
        
        .tab-pane {
            padding: 25px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-outline-primary {
            border: 1px solid var(--secondary-color);
            color: var(--secondary-color);
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-outline-primary:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .table th {
            background-color: #f8f9fa;
            color: var(--primary-color);
            font-weight: 600;
            padding: 15px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }
        
        .table tbody tr:hover {
            background-color: #f8f9fa;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-active {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .pagination-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px 0;
        }
        
        .pagination-info {
            color: #6c757d;
            font-size: 14px;
        }
        
        .pagination {
            margin-bottom: 0;
        }
        
        .page-link {
            color: var(--secondary-color);
            border: 1px solid var(--border-color);
            padding: 8px 15px;
        }
        
        .page-link:hover {
            background-color: #f8f9fa;
            color: var(--secondary-color);
        }
        
        .page-item.active .page-link {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        .search-box {
            margin-bottom: 20px;
        }
        
        .search-input {
            border-radius: 6px;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            width: 300px;
        }

        .selector-div{
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .action-cell {
            display: flex;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ‰æßËæπÊ†èÊ†∑Âºè */
        .sidebar {
            position: fixed;
            left: 0;
            top: 180px;
            width: 250px;
            height: calc(100vh - 80px);
            background: linear-gradient(135deg, #2c3e50, #34495e);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-toggle {
            position: fixed;
            left: 20px;
            top: 90px;
            background: #3498db;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .sidebar-toggle:hover {
            background: #2980b9;
            transform: scale(1.1);
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item{
            margin-bottom: 5px;
        }

        .menu-header{
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            color: rgba(255,255,255,0.8);
        }
        
        .menu-header:hover{
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
        }

        .menu-header.active{
            background: rgba(255,255,255,0.15);
            border-left-color: #3498db;
        }

        .menu-icon{
            margin-right: 15px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .menu-text{
            flex: 1;
            font-size: 16px;
            font-weight: 500;
        }

        .menu-arrow{
            transition: transform 0.3s;
        }

        .menu-header.active .menu-arrow{
            transform: rotate(90deg);
        }

        .submenu{
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            background: rgba(0,0,0,0.2);
        }

        .submenu.open{
            max-height: 200px;
        }

        .submenu-item{
            padding: 12px 20px 12px 60px;
            display: block;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }

        .submenu-item:hover{
            background: rgba(255,255,255,0.1);
            color: white;
            border-left-color: #2ecc71;
        }

        .submenu-item.active{
            background: rgba(255,255,255,0.15);
            color: white;
            border-left-color: #2ecc71;
        }

        /* Â≠êËèúÂçïÊ†∑Âºè */
.submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: rgba(0, 0, 0, 0.1);
}

.submenu.expanded {
    max-height: 1000px;
}

/* ‰∫åÁ∫ßÂ≠êËèúÂçïÂ§¥ÈÉ® */
.submenu-header {
    padding: 12px 20px 12px 50px;
    cursor: pointer;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
    font-size: 13px;
    color: white;
}

.submenu-header:hover {
    background: rgba(255, 255, 255, 0.08);
    border-left: 3px solid #ffd166;
}

.submenu-header.active {
    background: rgba(255, 255, 255, 0.1);
    border-left: 3px solid #ffd166;
}

.submenu-header .menu-arrow {
    transform: rotate(0deg);
}

.submenu-header .menu-arrow.expanded {
    transform: rotate(90deg);
}

/* ‰∏âÁ∫ßÂ≠êËèúÂçï */
.sub-submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: rgba(0, 0, 0, 0.15);
}

.sub-submenu.expanded {
    max-height: 500px;
}

/* ËèúÂçïÈìæÊé•Ê†∑Âºè */
.submenu-item {
    display: flex;
    align-items: center;
    padding: 10px 20px 10px 70px;
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    font-size: 13px;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
}

.submenu-item:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-left: 3px solid #4cd964;
    padding-left: 75px;
}

.submenu-item.active {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border-left: 3px solid #4cd964;
    font-weight: 500;
}

.submenu-item i {
    margin-right: 10px;
    font-size: 12px;
    width: 20px;
    text-align: center;
}



        /* .sidebar-item {
            display: block;
            padding: 15px 25px;
            color: #ecf0f1;
            text-decoration: none;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 1rem;
        }

        .sidebar-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-left-color: #3498db;
            color: white;
            transform: translateX(5px);
        }

        .sidebar-item.active {
            background-color: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
            color: #3498db;
        }

        .sidebar-item i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        } */

        /* ‰∏ªÂÜÖÂÆπÂå∫ÂüüË∞ÉÊï¥ */
        .main-wrapper {
            display: flex;
            margin-top: 0;
        }

        .main-content {
            flex: 1;
            margin-left: 270px;
            transition: margin-left 0.3s ease;
            padding: 20px;
        }

        .main-content.sidebar-collapsed {
            margin-left: 20px;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                top: 70px;
                height: calc(100vh - 70px);
            }

            .main-content {
                margin-left: 0;
                padding: 10px;
            }

            .main-content.sidebar-collapsed {
                margin-left: 0;
            }

            .sidebar-toggle {
                left: 10px;
                top: 80px;
            }

            .container {
                padding: 0 10px;
            }

            .search-container {
                padding: 20px;
                margin-bottom: 20px;
            }

            .search-options {
                flex-direction: column;
                gap: 10px;
            }

            .option-group {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (max-width: 480px) {
            .page-title h1 {
                font-size: 1.5rem;
            }

            .page-title p {
                font-size: 0.9rem;
            }

            .sidebar-item {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .search-container {
                padding: 15px;
            }
        }

        /* È°∂ÈÉ®ÂØºËà™Ê†è */
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: #3498db;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .btn-login {
            background-color: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-login:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .btn-register {
            background-color: #3498db;
            color: white;
        }

        .btn-register:hover {
            background-color: #2980b9;
        }

        /* ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            padding: 40px 0;
        }

        .page-title {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }

        .page-title h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .page-title p {
            font-size: 1.1rem;
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ÊêúÁ¥¢Âå∫Âüü */
        .search-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-bottom: 40px;
        }

        .search-tabs {
            display: flex;
            border-bottom: 1px solid #eaeaea;
            margin-bottom: 25px;
        }

        .search-tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .search-tab.active {
            color: #3498db;
            border-bottom: 3px solid #3498db;
        }

        .search-tab:hover:not(.active) {
            color: #2c3e50;
            background-color: #f8f9fa;
        }

        .search-box {
            margin-bottom: 25px;
            display: flex;

        }

        .search-input {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .sequence-input {
            height: 120px;
            resize: vertical;
            font-family: monospace;
        }

        .search-options {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .option-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-group label {
            font-size: 0.9rem;
            color: #555;
        }

        .option-group select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: white;
        }

        .create-repo-btn {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .btn-create {
            background: linear-gradient(135deg, #2ecc71, #1abc9c);
            color: white;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .btn-create:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        /* ÊêúÁ¥¢ÁªìÊûúÂå∫Âüü */
        .results-section {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .results-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }

        .results-count {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .result-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #eaeaea;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            padding: 15px;
            color: white;
            font-weight: 600;
        }

        .part .card-header { background-color: #3498db; }
        .terminator .card-header { background-color: #e74c3c; }
        .rbs .card-header { background-color: #2ecc71; }
        .cds .card-header { background-color: #9b59b6; }

        .card-body {
            padding: 15px;
        }

        .card-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .card-details {
            color: #666;
            font-size: 0.9rem;
        }

        .card-details p {
            margin-bottom: 8px;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 15px;
        }

        .tag {
            background-color: #ecf0f1;
            color: #7f8c8d;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.75rem;
        }

        .Logic-designer-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 100%;
            max-width: 600px;
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .header-icon {
            font-size: 28px;
            color: #4a6491;
        }
        
        h2 {
            color: #2c3e50;
            font-size: 24px;
            font-weight: 600;
        }
        
        .design-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .gate-type-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .gate-option {
            flex: 1;
            min-width: 120px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .gate-option:hover {
            background-color: #e9ecef;
        }
        
        .gate-option.active {
            background-color: #4a6491;
            color: white;
            border-color: #4a6491;
        }
        
        .gate-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .gate-name {
            font-size: 14px;
            font-weight: 500;
        }
        
        .parameters-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .parameter-group {
            margin-bottom: 20px;
        }
        
        .parameter-title {
            font-size: 16px;
            color: #555;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .parameter-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        .input-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .input-field {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #4a6491;
            box-shadow: 0 0 0 2px rgba(74, 100, 145, 0.2);
        }
        
        .visual-preview {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .gate-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 120px;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .gate-symbol {
            font-size: 40px;
            color: #4a6491;
        }
        
        .gate-label {
            text-align: center;
            font-size: 16px;
            color: #555;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .save-button, .reset-button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .save-button {
            background: linear-gradient(90deg, #4a6491, #2c3e50);
            color: white;
            box-shadow: 0 4px 10px rgba(74, 100, 145, 0.3);
        }
        
        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(74, 100, 145, 0.4);
        }
        
        .reset-button {
            background-color: #f8f9fa;
            color: #555;
            border: 1px solid #ddd;
        }
        
        .reset-button:hover {
            background-color: #e9ecef;
        }
        
        .button-icon {
            font-size: 18px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .parameter-description {
            font-size: 13px;
            color: #888;
            margin-top: 5px;
        }

        .color-selector-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 100%;
            max-width: 500px;
        }

        .color-preview {
            width: 100%;
            height: 120px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .color-options {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 16px;
            color: #555;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .preset-colors {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .color-swatch {
            aspect-ratio: 1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 3px solid transparent;
        }
        
        .color-swatch:hover {
            transform: scale(1.1);
        }
        
        .color-swatch.active {
            border-color: #2c3e50;
            transform: scale(1.05);
        }
        
        .custom-color {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .custom-color-input {
            flex: 1;
            height: 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .custom-color-label {
            color: #555;
            font-weight: 500;
        }
        
        .save-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, #4a6491, #2c3e50);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(74, 100, 145, 0.3);
        }
        
        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(74, 100, 145, 0.4);
        }
        
        .save-button:active {
            transform: translateY(0);
        }
        
        .button-icon {
            font-size: 18px;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 450px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: scale(1);
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 25px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-icon {
            font-size: 24px;
            color: #4a6491;
        }
        
        .modal-title {
            font-size: 20px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-label {
            display: block;
            font-size: 16px;
            color: #555;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #4a6491;
            box-shadow: 0 0 0 2px rgba(74, 100, 145, 0.2);
        }
        
        .input-hint {
            font-size: 14px;
            color: #888;
            margin-top: 8px;
        }
        
        .modal-footer {
            display: flex;
            gap: 15px;
            padding: 0 25px 25px;
        }
        
        .confirm-btn, .cancel-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .confirm-btn {
            background: linear-gradient(90deg, #4a6491, #2c3e50);
            color: white;
        }
        
        .confirm-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(74, 100, 145, 0.3);
        }
        
        .cancel-btn {
            background-color: #f8f9fa;
            color: #555;
            border: 1px solid #ddd;
        }
        
        .cancel-btn:hover {
            background-color: #e9ecef;
        }
        
        .notificationCreateRepo {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1001;
        }
        
        .notificationCreateRepo.show {
            transform: translateX(0);
        }
        
        .notificationCreateRepo.error {
            background-color: #f44336;
        }



        .notificationCreatePlate {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1001;
        }
        
        .notificationCreatePlate.show {
            transform: translateX(0);
        }
        
        .notificationCreatePlate.error {
            background-color: #f44336;
        }

        /* È°µËÑö */
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 30px 0;
            margin-top: 60px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .footer-section {
            flex: 1;
            min-width: 200px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #bdc3c7;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #3498db;
        }

        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        #search-button{
            margin-left:20px;
        }

        #user_info{
            display: flex;
            gap: 15px;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
            }

            .search-tabs {
                flex-wrap: wrap;
            }

            .search-tab {
                flex: 1;
                text-align: center;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                flex-direction: column;
            }
        }

    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <div class="header">
        <div class="header-container">
            <div>
                <h1>üß¨ ÁîüÁâ©ÂÖÉ‰ª∂ÁÆ°ÁêÜÁ≥ªÁªü</h1>
                <p>ÁÆ°ÁêÜ Part„ÄÅBackbone Âíå Plasmid Êï∞ÊçÆ</p>    
            </div>
            <div style="padding: 10px;">
                {% if user.is_authenticated %}
                    <h3>‰Ω†Â•ΩÔºå{{user.username}}</h3>
                {% endif %}
                {% if user.is_superuser %}
                    <button id = "admin_index" class="badge bg-light text-dark"><span class="badge bg-light text-dark">ÁÆ°ÁêÜ</span></button>
                {% endif %}
                {% if user.is_authenticated %}
                    <button id = "logout" class="badge bg-light text-dark" onclick="window.location.href = '/WebDatabase/logout'"><span class="badge bg-light text-dark">ÈÄÄÂá∫ÁôªÂΩï</span></button>
                {% else %}
                    <button id = "login" class="badge bg-light text-dark" onclick="window.location.href = '/WebDatabase/login'"><span class="badge bg-light text-dark">ÁôªÂΩï</span></button>
                {% endif %}
                <span class="badge bg-light text-dark">v2.1.0</span>
            </div>
        </div>
    </div>

    <!-- ‰æßËæπÊ†è -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-menu">
            <div class="menu-item">
                <div class="menu-header" onclick="toggleMenu(this)">
                    <div class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></div>
                    <div class="menu-text">Êï∞ÊçÆÂ∫ì</div>
                    <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                </div>
                <div class="submenu">
                    <div class="menu-item has-submenu">
                        <div class = "submenu-header" onclick="toggleSubMenu(this)">
                            <div class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></div>
                            <!-- <div class="menu-text"><a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>E. coli</a></div> -->
                            <div class="menu-text">E. coli</div>

                            <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                        </div>
                        <div class="sub-submenu">
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Promoter</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>RBS</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Gene</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Terminator</a>

                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Backbone</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Plasmid</a>
                        </div>
                    </div>
                    <div class="menu-item has-submenu">
                        <div class="submenu-header" onclick="toggleSubMenu(this)">
                            <div class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></div>
                            <!-- <div class="menu-text"><a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>E. coli</a></div> -->
                            <div class="menu-text">yeast</div>

                            <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                        </div>
                        <div class="sub-submenu">
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Promoter</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>RBS</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Gene</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Terminator</a>

                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Backbone</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Plasmid</a>
                        </div>
                        
                    </div>

                    <div class="menu-item has-submenu">
                        <div class="submenu-header" onclick="toggleSubMenu(this)">
                            <div class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></div>
                            <!-- <div class="menu-text"><a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>E. coli</a></div> -->
                            <div class="menu-text">Mammalia</div>

                            <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                        </div>
                        <div class="sub-submenu">
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Promoter</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>RBS</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Gene</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Terminator</a>

                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Backbone</a>
                            <a href="#" class="submenu-item active" data-tool="EcoliDatabase"><i class="fa fa-database" aria-hidden="true"></i>Plasmid</a>
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="menu-item">
                <div class="menu-header">
                    <div class="menu-icon"><i class="fa fa-bars"></i></div>
                    <div class="menu-text">ËÆæËÆ°Â∑•ÂÖ∑</div>
                    <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                </div>
                <div class="submenu">
                    <a href="" class="submenu-item" data-tool="base-designer"><i class="fa fa-cogs" aria-hidden="true">Âü∫Êú¨ËÆæËÆ°Â∑•ÂÖ∑</i></a>
                    <a href="" class="submenu-item" data-tool="logic_designer"><i class="fa fa-cogs" aria-hidden="true">ÈÄªËæëÈó®ËÆæËÆ°Â∑•ÂÖ∑</i></a>
                </div>
            </div>

            <div class="menu-item">
                <div class="menu-header">
                    <div class="menu-icon"><i class="fa fa-bars"></i></div>
                    <div class="menu-text">ÂàõÂª∫ËÆæËÆ°</div>
                    <div class="menu-arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                </div>
                <div class="submenu">
                    <!-- <a href="" class="submenu-item" data-tool="create-repo"><i class="fa fa-cogs" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°‰ªìÂ∫ì</i></a>
                    <a href="" class="submenu-item" data-tool="create-plate"><i class="fa fa-cogs" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°ÊñπÊ°à</i></a> -->
                    <a href="" class="submenu-item"><i class="fa fa-cogs" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°‰ªìÂ∫ì</i></a>
                    <a href="" class="submenu-item"><i class="fa fa-cogs" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°ÊñπÊ°à</i></a>
                </div>
            </div>

            <!-- <div class="menu-item">
                <div class="menu-header">
                    <a href="" class="submenu-item" data-tool="create-repo"><i class="fa fa-braille" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°</i>
                </div>
            </div>

            <div class="menu-item">
                <div class="menu-header">
                    <a href="" class="submenu-item" data-tool="create-plate"><i class="fa fa-braille" aria-hidden="true">ÂàõÂª∫ËÆæËÆ°ÊñπÊ°à</i>
                </div>
            </div> -->
        </div>
    </div>

    <!-- ‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆ -->
    <button class="sidebar-toggle" id="sidebarToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
    <div class="main-wrapper">
        <div class="main-content" id="mainContent">
            <div class="card-header">
                <h5 class="card-title">ÂÖÉ‰ª∂Â∫ìÁÆ°ÁêÜ</h5>
            </div>
            <div class="card-body p-0">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="part-tab" data-bs-toggle="tab" data-bs-target="#part" type="button" role="tab" aria-controls="part" aria-selected="true">
                            üß© Part
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="backbone-tab" data-bs-toggle="tab" data-bs-target="#backbone" type="button" role="tab" aria-controls="backbone" aria-selected="false">
                            üß¨ Backbone
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="plasmid-tab" data-bs-toggle="tab" data-bs-target="#plasmid" type="button" role="tab" aria-controls="plasmid" aria-selected="false">
                            üß™ Plasmid
                        </button>
                    </li>
                </ul>
                
                <div class="tab-content" id="myTabContent">
                    <!-- Part Tab -->
                    <div class="tab-pane fade show active" id="part" role="tabpanel" aria-labelledby="part-tab">
                        <!-- <form>
                            {% csrf_token %} -->
                        <div class="selector-div">
                            <div> Type </div>
                            <select id = "PartTypeSelect">
                                <option></option>
                                <option>Promoter</option>
                                <option>P+R</option>
                                <option>RBS</option>
                                <option>CDS</option>
                                <option>Terminator</option>
                            </select>
                            <div>Enzyme</div>
                            <select id = "PartEnzyme">
                                <option></option>
                                <option>BsmBI</option>
                                <option>BsaI</option>
                                <option>BbsI</option>
                                <option>AarI</option>
                                <option>SapI</option>
                            </select>
                            <div>Scar</div>
                            <select id = "PartScar">
                                <option></option>
                            </select>
                            <button class="btn btn-primary" id = "PartSelectorReset">Ê∏ÖÁ©∫</button>
                            <!-- </form> -->
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                üì§ ‰∏ä‰º†ÂõæË∞±
                            </button>
                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#batchUploadModal">
                                üìÅ ÊâπÈáè‰∏ä‰º†
                            </button>
                            <div class="ms-auto">
                                <input type="text" class="search-input" placeholder="ÊêúÁ¥¢ Part..." id = "PartSearchInput">
                                <button class="btn btn-primary" id="Partsearchbutton">
                                    <i class="fa fa-search" aria-hidden="true">ÊêúÁ¥¢</i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ÂêçÁß∞</th>
                                        <th>Âà´Âêç</th>
                                        <th>ÁßçÁ±ª</th>
                                        <th>Áâ©Áßç</th>
                                        <th>ÂèÇËÄÉ‰ø°ÊÅØ</th>
                                    </tr>
                                </thead>
                                <tbody id="partTableBody">
                                    <!-- Part Êï∞ÊçÆÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="pagination-container">
                            <div class="pagination-info" id="partPaginationInfo">
                                ÊòæÁ§∫ 0 Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ 0 Âà∞ 0 Êù°
                            </div>
                            <nav>
                                <ul class="pagination" id="partPagination">
                                    <!-- ÂàÜÈ°µÊéß‰ª∂Â∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                    
                    <!-- Backbone Tab -->
                    <div class="tab-pane fade" id="backbone" role="tabpanel" aria-labelledby="backbone-tab">
                        <form>
                            {% csrf_token %}
                        <div class="selector-div">
                            <div> Ori </div>
                            <select id = "OriSelect">
                                <option></option>
                            </select>
                            <div>Marker</div>
                            <select id = "MarkerSelect">
                                <option></option>
                            </select>
                            <div>Enzyme</div>
                            <select id = "BackboneEnzyme">
                                <option></option>
                                <option>BsmBI</option>
                                <option>BsaI</option>
                                <option>BbsI</option>
                                <option>AarI</option>
                                <option>SapI</option>
                            </select>
                            <div>Scar</div>
                            <select id = "BackboneScar">
                                <option></option>
                            </select>
                            <button class="btn btn-primary" id = "BackboneSelectorReset">Ê∏ÖÁ©∫</button>
                            </form>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                üì§ ‰∏ä‰º†ÂõæË∞±
                            </button>
                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#batchUploadModal">
                                üìÅ ÊâπÈáè‰∏ä‰º†
                            </button>
                            <div class="ms-auto">
                                <input type="text" class="search-input" placeholder="ÊêúÁ¥¢ Backbone..." id = "BackboneSearchInput">
                                <button class="btn btn-primary" id="Backbonesearchbutton">
                                    <i class="fa fa-search" aria-hidden="true">ÊêúÁ¥¢</i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ÂêçÁß∞</th>
                                        <th>Âà´Âêç</th>
                                        <th>Marker</th>
                                        <th>Origin</th>
                                        <th>Áâ©Áßç</th>
                                        <th>Scar(BsaI/BpiI)</th>
                                    </tr>
                                </thead>
                                <tbody id="backboneTableBody">
                                    <!-- Backbone Êï∞ÊçÆÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="pagination-container">
                            <div class="pagination-info" id="backbonePaginationInfo">
                                ÊòæÁ§∫ 0 Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ 0 Âà∞ 0 Êù°
                            </div>
                            <nav>
                                <ul class="pagination" id="backbonePagination">
                                    <!-- ÂàÜÈ°µÊéß‰ª∂Â∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                    
                    <!-- Plasmid Tab -->
                    <div class="tab-pane fade" id="plasmid" role="tabpanel" aria-labelledby="plasmid-tab">
                        <form>
                        {% csrf_token %}
                        <div class="selector-div">
                            <div> Ori </div>
                            <select id = "OriSelectPlasmid">
                                <option></option>
                            </select>
                            <div>Marker</div>
                            <select id = "MarkerSelectPlasmid">
                                <option></option>
                            </select>
                            <div>Enzyme</div>
                            <select id = "PlasmidEnzyme">
                                <option></option>
                                <option>BsmBI</option>
                                <option>BsaI</option>
                                <option>BbsI</option>
                                <option>AarI</option>
                                <option>SapI</option>
                            </select>
                            <div>Scar</div>
                            <select id = "PlasmidScar">
                                <option></option>
                            </select>
                            <button class="btn btn-primary" id = "PlasmidSelectorReset">Ê∏ÖÁ©∫</button>
                        </form>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                üì§ ‰∏ä‰º†ÂõæË∞±
                            </button>
                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#batchUploadModal">
                                üìÅ ÊâπÈáè‰∏ä‰º†
                            </button>
                            <div class="ms-auto">
                                <input type="text" class="search-input" placeholder="ÊêúÁ¥¢ Plasmid..." id="PlasmidSearchInput">
                                <button class="btn btn-primary" id="Plasmidsearchbutton">
                                    <i class="fa fa-search" aria-hidden="true">ÊêúÁ¥¢</i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ÂêçÁß∞</th>
                                        <th>Âà´Âêç</th>
                                        <th>Ori</th>
                                        <th>Marker</th>
                                        <th>Level</th>
                                        <th>Scar(BsaI/BpiI)</th>
                                    </tr>
                                </thead>
                                <tbody id="plasmidTableBody">
                                    <!-- Plasmid Êï∞ÊçÆÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="pagination-container">
                            <div class="pagination-info" id="plasmidPaginationInfo">
                                ÊòæÁ§∫ 0 Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ 0 Âà∞ 0 Êù°
                            </div>
                            <nav>
                                <ul class="pagination" id="plasmidPagination">
                                    <!-- ÂàÜÈ°µÊéß‰ª∂Â∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>


            <div class="create-repo-btn">
                <button class="btn btn-primary" id="create-repo" data-bs-toggle="modal" data-bs-target="#modalOverlay-Repo">
                    <i class="fas fa-plus-circle"></i>
                    ÂàõÂª∫ËÆæËÆ°‰ªìÂ∫ì
                </button>

                <button class="btn btn-primary" id="create-plate" data-bs-toggle="modal" data-bs-target="#modalOverlay-Plate">
                    <i class="fas fa-plus-circle"></i>
                    ÂàõÂª∫ËÆæËÆ°ÊñπÊ°à
                </button>
            </div>
        </div>
            
        <!-- ‰∏ä‰º†ÁªÑË£ÖÊñπÊ°àÊñá‰ª∂ÂºπÁ™ó -->
        <div class="modal fade" id = "modalOverlay-Repo" tabindex = "-1" aria-labelledby="create-repo-label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="modal-icon">üèóÔ∏è</div>
                        <div class="modal-title">ÂØºÂÖ•ÁªÑË£ÖÊñπÊ°à</div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                    <p>ËØ∑‰∏ä‰º†ÂåÖÂê´ÁªÑË£ÖÊñπÊ°àÁöÑExcelÊñá‰ª∂</p>
                    <form id="assemblyUploadForm">
                        {% csrf_token %}
                        <div class = "mb-3">
                            <label for="AssemblyFileInput" class="form-label">ÈÄâÊã©Êñá‰ª∂</label>
                            <input class="form-control" type="file" id="AssemblyFileInput" accept=".xlsx">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ê®°Êùø‰∏ãËΩΩ</label>
                            <div>
                                <a href="/LabDatabase/download/assembly" class="btn btn-sm btn-outline-primary me-2">ÁªÑË£ÖÊñπÊ°àÊ®°Êùø</a>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" id="assemblyFileUpload">ÊâπÈáè‰∏ä‰º†</button>
                </div>
            </div>
            </div>
        </div>

            
        <div class="notificationCreateRepo" id="notificationCreateRepo">
            ‰ªìÂ∫ìÂàõÂª∫ÊàêÂäüÔºÅ
        </div>


            <!-- <div class="modal-overlay" id="modalOverlay-Plate">
                <div class="modal"> -->
        <!-- <div class="modal fade" id = "modalOverlay-Plate" tabindex = "-1" aria-labelledby="create-plate-label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <div class="modal-icon">üèóÔ∏è</div>
                    <div class="modal-title">ÂàõÂª∫Êñ∞96Â≠îÊùø</div>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                        <label class="input-label">ÈÄâÊã©‰ªìÂ∫ì</label>
                        <select id="PlateSection">
                        </select>
                    </div>
                </div>
                    
                <div class="modal-footer">
                    <button class="cancel-btn" id="cancelBtn-Plate">ÂèñÊ∂à</button>
                    <button class="confirm-btn" id="confirmBtn-Plate">ÂàõÂª∫ËÆæËÆ°ÊñπÊ°à</button>
                </div>
                </div>
                
            </div>
        </div> -->

        <!-- ÁªÑË£ÖÊñπÊ°àÊâßË°åÂºπÁ™ó -->
        <div class="modal fade" id = "modalOverlay-Plate" tabindex = "-1" aria-labelledby="create-plate-label" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="modal-icon">üèóÔ∏è</div>
                        <div class="modal-title">ÁªÑË£ÖÊñπÊ°àÊâßË°å</div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                <div class="modal-body">
                    <div class="input-group">
                        <label class="input-label">ÈÄâÊã©‰ªìÂ∫ì</label>
                        <select id="PlateSection">
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" id="AssemblyStartBtn">ÂºÄÂßãÁªÑË£Ö</button>
                </div>
            </div>
        </div>
        </div>
            
        <div class="notificationCreatePlate" id="notificationCreatePlate">
            ÊñπÊ°àÂàõÂª∫ÊàêÂäüÔºÅ
        </div>

            <!-- ‰∏ä‰º†ÂõæË∞±Ê®°ÊÄÅÊ°Ü -->
    <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadModalLabel">‰∏ä‰º†ÂõæË∞±</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="uploadForm">
                        <div class="mb-3">
                            <label for="fileInput" class="form-label">ÈÄâÊã©ÂõæË∞±Êñá‰ª∂</label>
                            <input class="form-control" multiple type="file" id="fileInput" accept=".fasta, .gb, .gbk, .ape, .str, .dna">
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">ÊèèËø∞</label>
                            <textarea class="form-control" id="description" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" id="uploadBtnPart">‰∏ä‰º†ÂÖÉ‰ª∂ÂõæË∞±</button>
                    <button type="button" class="btn btn-primary" id="uploadBtnBackbone">‰∏ä‰º†ËΩΩ‰ΩìÂõæË∞±</button>
                    <button type="button" class="btn btn-primary" id="uploadBtnPlasmid">‰∏ä‰º†Ë¥®Á≤íÂõæË∞±</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊâπÈáè‰∏ä‰º†Ê®°ÊÄÅÊ°Ü -->
    <div class="modal fade" id="batchUploadModal" tabindex="-1" aria-labelledby="batchUploadModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="batchUploadModalLabel">ÊâπÈáè‰∏ä‰º†</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>ËØ∑‰∏ä‰º†ÂåÖÂê´Êï∞ÊçÆÁöÑExcelÊñá‰ª∂„ÄÇ</p>
                    <form id="batchUploadForm">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="batchFileInput" class="form-label">ÈÄâÊã©Êñá‰ª∂</label>
                            <input class="form-control" type="file" id="batchFileInput" accept=".xlsx">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ê®°Êùø‰∏ãËΩΩ</label>
                            <div>
                                <a href="/LabDatabase/download/part" class="btn btn-sm btn-outline-primary me-2">PartÊ®°Êùø</a>
                                <a href="/LabDatabase/download/backbone" class="btn btn-sm btn-outline-primary me-2">BackboneÊ®°Êùø</a>
                                <a href="/LabDatabase/download/plasmid" class="btn btn-sm btn-outline-primary">PlasmidÊ®°Êùø</a>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" id="batchUploadBtn">ÊâπÈáè‰∏ä‰º†</button>
                </div>
            </div>
        </div>
    </div>


            <div class="base-design-container"  style="padding:40px; display:none;margin-left:270px;">
                <h2 style="margin: 10px 0 20px; color: #2c3e50;">Âü∫Êú¨ËÆæËÆ°</h2>
                <div class="design-form" style="background-color: white; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); padding: 30px; margin-bottom: 40px;">
                    <div class="option-group" style="margin-bottom: 15px;">
                        <label for="design-species">Áâ©Áßç:</label>
                        <select id="design-species">
                            <option value="">ËØ∑ÈÄâÊã©</option>
                            <option value="e-coli">Â§ßËÇ†ÊùÜËèå</option>
                            <option value="yeast">ÈÖµÊØç</option>
                            <option value="mammalian">Âì∫‰π≥Âä®Áâ©ÁªÜËÉû</option>
                            <option value="plant">Ê§çÁâ©</option>
                        </select>
                    </div>

                    <div class="option-group" style="margin-bottom: 15px;">
                        <label for="design-gene">Âü∫Âõ†ID/ÂêçÁß∞:</label>
                        <input type="text" id="design-gene" class="search-input" placeholder="Â¶ÇÔºölacI / BBa_E0040">
                    </div>

                    <div class="option-group" style="margin-bottom: 15px;">
                        <label for="design-expression">ÈúÄÊ±ÇË°®ËææÈáè:</label>
                        <input type="number" id="design-expression" class="search-input" placeholder="‰æãÂ¶ÇÔºö1000 (a.u.)">
                    </div>

                    <div class="create-repo-btn" style="margin-top: 10px;">
                        <button class="btn btn-create" id="design-submit">Êèê‰∫§ËÆæËÆ°</button>
                    </div>
                </div>
            </div>

            <!-- <div class="color-design-container"  style="display: none">
                <div class="color-preview" id="colorPreview">
                    ÂΩìÂâçÈÄâÊã©ÁöÑÈ¢úËâ≤
                </div>

                <div class="color-options">
                    <div class="section-title">È¢ÑËÆæÈ¢úËâ≤</div>
                    <div class="preset-colors" id="presetColors">

                    </div>
                    <div class="section-title">Ëá™ÂÆö‰πâÈ¢úËâ≤</div>
                    <div class="custom-color">
                        <input type="color" class="custom-color-input" id="customColor" value="#4a6491">
                        <span class="custom-color-label">ÁÇπÂáªÈÄâÊã©Ëá™ÂÆö‰πâÈ¢úËâ≤</span>
                    </div>
                    <div class="color-code" id="colorCode">È¢úËâ≤‰ª£Á†Å: #4a6491</div>
                </div>
                <button class="save-button" id="saveButton">
                    <span class="button-icon"></span>
                    <span>‰øùÂ≠òÂà∞‰ªìÂ∫ì</span>
                </button>
            </div> -->

            <div class="Logic-designer-container"  style="padding:40px; display:none;margin-left:270px;">
                <div class="header">
                    <div class="header-icon">üß¨</div>
                    <h2>Âü∫Âõ†ÈÄªËæëÈó®ÁîµË∑ØËÆæËÆ°Âô®</h2>
                </div>
                
                <div class="design-section">
                    <div class="section-title">ÈÄâÊã©ÈÄªËæëÈó®Á±ªÂûã</div>
                    <div class="gate-type-selector">
                        <div class="gate-option active" data-gate="not">
                            <div class="gate-icon">NOT</div>
                            <div class="gate-name">ÈùûÈó®</div>
                        </div>
                        <div class="gate-option" data-gate="and">
                            <div class="gate-icon">AND</div>
                            <div class="gate-name">‰∏éÈó®</div>
                        </div>
                        <div class="gate-option" data-gate="or">
                            <div class="gate-icon">OR</div>
                            <div class="gate-name">ÊàñÈó®</div>
                        </div>
                        <div class="gate-option" data-gate="nand">
                            <div class="gate-icon">NAND</div>
                            <div class="gate-name">‰∏éÈùûÈó®</div>
                        </div>
                        <div class="gate-option" data-gate="nor">
                            <div class="gate-icon">NOR</div>
                            <div class="gate-name">ÊàñÈùûÈó®</div>
                        </div>
                    </div>
                </div>
                
                <div class="parameters-section">
                    <div class="section-title">ÂèÇÊï∞ËÆæÁΩÆ</div>
                    
                    <div class="parameter-group" id="common-params">
                        <div class="parameter-title">ÈÄöÁî®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">ÂêçÁß∞</label>
                                <input type="text" class="input-field" id="gateName" placeholder="ÈÄªËæëÈó®ÂêçÁß∞">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ÊèèËø∞</label>
                                <input type="text" class="input-field" id="gateDescription" placeholder="ÈÄªËæëÈó®ÊèèËø∞">
                            </div>
                        </div>
                    </div>
                    
                    <div class="parameter-group" id="not-params">
                        <div class="parameter-title">ÈùûÈó®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">YMax</label>
                                <input type="number" class="input-field" id="notYMax" placeholder="ÊúÄÂ§ßÂÄº" min="0" max="100" step="0.1">
                                <div class="parameter-description">ËæìÂá∫‰ø°Âè∑ÁöÑÊúÄÂ§ßÂÄº</div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">YMin</label>
                                <input type="number" class="input-field" id="notYMin" placeholder="ÊúÄÂ∞èÂÄº" min="0" max="100" step="0.1">
                                <div class="parameter-description">ËæìÂá∫‰ø°Âè∑ÁöÑÊúÄÂ∞èÂÄº</div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">K</label>
                                <input type="number" class="input-field" id="notK" placeholder="KÂÄº" min="0" max="100" step="0.1">
                                <div class="parameter-description">ÂèçÂ∫îÈÄüÁéáÂ∏∏Êï∞</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="parameter-group" id="and-params" style="display: none;">
                        <div class="parameter-title">‰∏éÈó®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">ËæìÂÖ•Êï∞Èáè</label>
                                <input type="number" class="input-field" id="andInputs" placeholder="ËæìÂÖ•Êï∞Èáè" min="2" max="10" value="2">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ÈòàÂÄº</label>
                                <input type="number" class="input-field" id="andThreshold" placeholder="ÈòàÂÄº" min="0" max="100" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="parameter-group" id="or-params" style="display: none;">
                        <div class="parameter-title">ÊàñÈó®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">ËæìÂÖ•Êï∞Èáè</label>
                                <input type="number" class="input-field" id="orInputs" placeholder="ËæìÂÖ•Êï∞Èáè" min="2" max="10" value="2">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ÊøÄÊ¥ªÈòàÂÄº</label>
                                <input type="number" class="input-field" id="orThreshold" placeholder="ÊøÄÊ¥ªÈòàÂÄº" min="0" max="100" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="parameter-group" id="nand-params" style="display: none;">
                        <div class="parameter-title">‰∏éÈùûÈó®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">ËæìÂÖ•Êï∞Èáè</label>
                                <input type="number" class="input-field" id="nandInputs" placeholder="ËæìÂÖ•Êï∞Èáè" min="2" max="10" value="2">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ÊäëÂà∂ÈòàÂÄº</label>
                                <input type="number" class="input-field" id="nandThreshold" placeholder="ÊäëÂà∂ÈòàÂÄº" min="0" max="100" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="parameter-group" id="nor-params" style="display: none;">
                        <div class="parameter-title">ÊàñÈùûÈó®ÂèÇÊï∞</div>
                        <div class="parameter-inputs">
                            <div class="input-group">
                                <label class="input-label">ËæìÂÖ•Êï∞Èáè</label>
                                <input type="number" class="input-field" id="norInputs" placeholder="ËæìÂÖ•Êï∞Èáè" min="2" max="10" value="2">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ÊäëÂà∂ÈòàÂÄº</label>
                                <input type="number" class="input-field" id="norThreshold" placeholder="ÊäëÂà∂ÈòàÂÄº" min="0" max="100" step="0.1">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="visual-preview">
                    <div class="section-title">ÈÄªËæëÈó®È¢ÑËßà</div>
                    <div class="gate-visual">
                        <div class="gate-symbol" id="gateSymbol">NOT</div>
                    </div>
                    <div class="gate-label" id="gateLabel">ÈùûÈó® - ‰ø°Âè∑ÂèñÂèç</div>
                </div>
                
                <div class="action-buttons">
                    <button class="save-button" id="saveButtonlog">
                        <span class="button-icon">üíæ</span>
                        <span>‰øùÂ≠òÈÄªËæëÈó®ËÆæËÆ°</span>
                    </button>
                    <button class="reset-button" id="resetButton">
                        <span class="button-icon">üîÑ</span>
                        <span>ÈáçÁΩÆÂèÇÊï∞</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
    <!-- Âü∫Êú¨ËÆæËÆ°Ê®°ÂùóÔºà‰Ωç‰∫éÊêúÁ¥¢Âå∫Âüü‰πãÂêéÔºâ -->
    

    

    <!-- È°µËÑö -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ÂÖ≥‰∫éÊàë‰ª¨</h3>
                    <p>BioRepositoryÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁîüÁâ©ÂÖÉ‰ª∂Êï∞ÊçÆÂ∫ìÔºåËá¥Âäõ‰∫é‰∏∫ÂêàÊàêÁîüÁâ©Â≠¶Á†îÁ©∂Êèê‰æõÈ´òË¥®ÈáèÁöÑÊ†áÂáÜÂåñÁîüÁâ©ÂÖÉ‰ª∂„ÄÇ</p>
                </div>

                <div class="footer-section">
                    <h3>Âø´ÈÄüÈìæÊé•</h3>
                    <ul class="footer-links">
                        <li><a href="#">ÊñáÊ°£</a></li>
                        <li><a href="#">ÊïôÁ®ã</a></li>
                        <li><a href="#">API</a></li>
                        <li><a href="#">Á§æÂå∫</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>ËÅîÁ≥ªÊàë‰ª¨</h3>
                    <ul class="footer-links">
                        <li><a href="#">ÊîØÊåÅ</a></li>
                        <li><a href="#">ÂèçÈ¶à</a></li>
                        <li><a href="#">Âêà‰Ωú</a></li>
                        <li><a href="#">GitHub</a></li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                &copy; 2025 BioRepository. ‰øùÁïôÊâÄÊúâÊùÉÂà©„ÄÇ
            </div>
        </div>
    </footer>

    <script>



        const itemsPerPage = 10;
        let currentPages = {
            part: 1,
            backbone: 1,
            plasmid: 1
        };
        
        document.getElementById('uploadBtnPart').addEventListener('click', function() {
                // alert('‰∏ä‰º†ÂäüËÉΩÂ∞ÜÂú®ÂÆûÈôÖÁ≥ªÁªü‰∏≠ÂÆûÁé∞');
                const uploadModal = bootstrap.Modal.getInstance(document.getElementById('uploadModal'));
                var file_input = document.getElementById("fileInput");
                // var files = file_input.files;
                var files = file_input.files;
                uploadModal.hide();
                UploadFile(files, "part");
        });
        
        document.getElementById('uploadBtnBackbone').addEventListener('click', function() {
                // alert('‰∏ä‰º†ÂäüËÉΩÂ∞ÜÂú®ÂÆûÈôÖÁ≥ªÁªü‰∏≠ÂÆûÁé∞');
                const uploadModal = bootstrap.Modal.getInstance(document.getElementById('uploadModal'));
                var file_input = document.getElementById("fileInput");
                var files = file_input.files;
                uploadModal.hide();
                UploadFile(files, "backbone");
            });


            document.getElementById('uploadBtnPlasmid').addEventListener('click', function() {
                // alert('‰∏ä‰º†ÂäüËÉΩÂ∞ÜÂú®ÂÆûÈôÖÁ≥ªÁªü‰∏≠ÂÆûÁé∞');
                const uploadModal = bootstrap.Modal.getInstance(document.getElementById('uploadModal'));
                var file_input = document.getElementById("fileInput");
                console.log(file_input.files);
                var files = file_input.files;
                uploadModal.hide();
                UploadFile(files, "plasmid");
            });
            
            document.getElementById('batchUploadBtn').addEventListener('click', function() {
                var file_input = document.getElementById('batchFileInput');
                console.log(file_input);
                console.log(file_input.files);
                var file = file_input.files;
                batchUploadFile(file);
                const batchUploadModal = bootstrap.Modal.getInstance(document.getElementById('batchUploadModal'));
                batchUploadModal.hide();
            });

            async function UploadFile(files, type){
                if(! files){
                    alert('ËØ∑ÈÄâÊã©‰∏ä‰º†Êñá‰ª∂');
                    return;
                }
                let fd = new FormData();
                console.log(files.length);
                for (let i = 0;i<files.length;i++){
                    let file = files[i];
                    fd.append('files',file);
                }
                console.log(fd['files'])
                fd.append('type',type);
                const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                const response = await fetch("/LabDatabase/UploadMap",{
                    method:'POST',
                    body:fd,
                    headers:{
                        'X-CSRFToken':csrfToken,
                    }
                });
                var file_input = document.getElementById("fileInput");
                file_input.innerText = "";
                const result = await response.json();
                if(result.task_id){
                    alert(result.message);
                    pollTaskStatus(result.task_id);
                }
                else{
                    displayResult(result);
                }
            }

            async function batchUploadFile(file){
                if(!file){
                    alert('ËØ∑ÈÄâÊã©Êñá‰ª∂');
                    return;
                }
                console.log(file);
                const fd = new FormData();
                fd.append('file',file[0]);

                const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                const response = await fetch("/LabDatabase/UploadFile",{
                    method:'POST',
                    body: fd,
                    headers:{
                        'X-CSRFToken': csrfToken,
                    }
                });
                var file_input = document.getElementById('batchFileInput');
                file_input.innerText = '';
                const result = await response.json()
                if(result.task_id){
                    alert(result.message);
                    pollTaskStatus(result.task_id);
                }
                else{
                    displayResult(result);
                }
                
            }

            function pollTaskStatus(taskId){
                const pollInterval = setInterval(async () => {
                    try {
                        const response = await fetch(`/LabDatabase/task_status/${taskId}`);
                        const result = await response.json();
                        console.log(result);
                        if(result.status === "completed"){
                            console.log("completed");
                            
                            clearInterval(pollInterval);
                            displayResult(result);
                        }
                        else if(result.status === "failed"){
                            console.log("failed");
                            console.log(result);
                            clearInterval(pollInterval);
                            displayError(result.error);
                        }
                    }
                    catch(error){
                        clearInterval(pollInterval);
                        displayError('ËΩÆËØ¢Â§±Ë¥•Ôºö'+error.message);
                    }
                }, 2000);
            }

            function displayError(message){
                alert(message);
            }

            function displayResult(result){
                if(result.status === "completed"){
                    if(result.message){
                        alert(result.message);
                    }
                    else{
                        alert("‰∏ä‰º†ÂÆåÊàê");
                    }
                }
                else{
                    console.log(result.error);
                    alert('Â§ÑÁêÜÂ§±Ë¥•Ôºö'+result.error);
                }
            }
            document.getElementById('PartSelectorReset').addEventListener('click', function(){
                const PartTypeSelect = document.getElementById('PartTypeSelect');
                const PartEnzyme = document.getElementById('PartEnzyme');
                const PartScar = document.getElementById('PartScar');
                PartTypeSelect.selectedIndex = 0;
                PartEnzyme.selectedIndex = 0;
                PartScar.selectedIndex = 0;
            });

            document.getElementById('BackboneSelectorReset').addEventListener('click', function(){
                const OriSelect = document.getElementById('OriSelect');
                const MarkerSelect = document.getElementById('MarkerSelect');
                const BackboneEnzyme = document.getElementById('BackboneEnzyme');
                const BackboneScar = document.getElementById('BackboneScar');
                OriSelect.selectedIndex = 0;
                MarkerSelect.selectedIndex = 0;
                BackboneEnzyme.selectedIndex = 0;
                BackboneScar.selectedIndex = 0;
            });

            document.getElementById('PlasmidSelectorReset').addEventListener('click',function(){
                const OriSelectPlasmid = document.getElementById('OriSelectPlasmid');
                const MarkerSelectPlasmid = document.getElementById('MarkerSelectPlasmid');
                const PlasmidEnzyme = document.getElementById('PlasmidEnzyme');
                const PlasmidScar = document.getElementById('PlasmidScar');
                OriSelectPlasmid.selectedIndex = 0;
                MarkerSelectPlasmid.selectedIndex = 0;
                PlasmidEnzyme.selectedIndex = 0;
                PlasmidScar.selectedIndex = 0;
            });

            //ÊêúÁ¥¢ÂäüËÉΩÂÆûÁé∞
            //part
            document.getElementById('Partsearchbutton').addEventListener('click', function() {
                let Type = document.getElementById('PartTypeSelect').options[document.getElementById('PartTypeSelect').selectedIndex].text;
                let Enzyme = document.getElementById('PartEnzyme').options[document.getElementById('PartEnzyme').selectedIndex].text;
                let Scar = document.getElementById('PartScar').options[document.getElementById('PartScar').selectedIndex].text;
                let name = document.getElementById('PartSearchInput').value;
                if(Type == "" && Enzyme == "" && Scar == "" && name == ""){
                    alert("ËØ∑ÈÄâÊã©Á≠õÈÄâÊ†áÂáÜ");
                    return
                }
                else{
                    renderTable("part",true,1);
                }
            });
            //Backbone
            document.getElementById('Backbonesearchbutton').addEventListener('click', function() {
                let ori = document.getElementById('OriSelect').options[document.getElementById('OriSelect').selectedIndex].text;
                let marker = document.getElementById('MarkerSelect').options[document.getElementById('MarkerSelect').selectedIndex].text;
                let Enzyme = document.getElementById('BackboneEnzyme').options[document.getElementById('BackboneEnzyme').selectedIndex].text;
                let scar = document.getElementById("BackboneScar").options[document.getElementById("BackboneScar").selectedIndex].text;
                let name = document.getElementById("BackboneSearchInput").value;
                if(ori == "" && marker == "" && Enzyme == "" && scar == "" && name == ""){
                    alert("ËØ∑ÈÄâÊã©Á≠õÈÄâÊ†áÂáÜ");
                }
                else{
                    renderTable("backbone",true,1);
                }
            });
            //Plasmid
            document.getElementById('Plasmidsearchbutton').addEventListener('click',function(){
                let ori = document.getElementById('OriSelectPlasmid').options[document.getElementById('OriSelectPlasmid').selectedIndex].text;
                let marker = document.getElementById('MarkerSelectPlasmid').options[document.getElementById('MarkerSelectPlasmid').selectedIndex].text;
                let Enzyme = document.getElementById('PlasmidEnzyme').options[document.getElementById('PlasmidEnzyme').selectedIndex].text;
                let scar = document.getElementById("PlasmidScar").options[document.getElementById("PlasmidScar").selectedIndex].text;
                let name = document.getElementById("PlasmidSearchInput").value;
                console.log("testtest");
                if(ori == "" && marker == "" && Enzyme == "" && scar == "" && name == ""){
                    alert("ËØ∑ÈÄâÊã©Á≠õÈÄâÊ†áÂáÜ");
                }
                else{
                    renderTable("plasmid",true,1);
                }
            });








function toggleMenu(menuHeader){
                const menuItem = menuHeader.parentElement;
                const submenu = menuItem.querySelector('.submenu');
                const arrow = menuHeader.querySelector('.menu-arrow i');
    
            // ÂàáÊç¢Â≠êËèúÂçï
            submenu.classList.toggle('expanded');
    
            // ÂàáÊç¢ÁÆ≠Â§¥ÊñπÂêë
            if (submenu.classList.contains('expanded')) {
                arrow.classList.remove('fa-angle-down');
                arrow.classList.add('fa-angle-up');
                menuHeader.classList.add('active');
            } else {
                arrow.classList.remove('fa-angle-up');
                arrow.classList.add('fa-angle-down');
                menuHeader.classList.remove('active');
            }
            // ÂÖ≥Èó≠ÂÖ∂‰ªñÂ±ïÂºÄÁöÑËèúÂçïÔºàÂèØÈÄâÔºâ
            closeOtherMenus(menuItem);
        }


        function toggleSubMenu(submenuHeader) {
    const menuItem = submenuHeader.parentElement;
    const subSubmenu = menuItem.querySelector('.sub-submenu');
    const arrow = submenuHeader.querySelector('.menu-arrow i');
    
    // ÂàáÊç¢‰∏âÁ∫ßÂ≠êËèúÂçï
    subSubmenu.classList.toggle('expanded');
    
    // ÂàáÊç¢ÁÆ≠Â§¥ÊñπÂêë
    if (subSubmenu.classList.contains('expanded')) {
        arrow.classList.remove('fa-angle-right');
        arrow.classList.add('fa-angle-down');
        submenuHeader.classList.add('active');
    } else {
        arrow.classList.remove('fa-angle-down');
        arrow.classList.add('fa-angle-right');
        submenuHeader.classList.remove('active');
    }
}

// ÂÖ≥Èó≠ÂÖ∂‰ªñËèúÂçï
function closeOtherMenus(currentMenuItem) {
    const allMenuItems = document.querySelectorAll('.menu-item');
    
    allMenuItems.forEach(item => {
        if (item !== currentMenuItem) {
            const submenu = item.querySelector('.submenu');
            const header = item.querySelector('.menu-header');
            const arrow = header ? header.querySelector('.menu-arrow i') : null;
            
            if (submenu && submenu.classList.contains('expanded')) {
                submenu.classList.remove('expanded');
                
                if (arrow) {
                    arrow.classList.remove('fa-angle-up');
                    arrow.classList.add('fa-angle-down');
                }
                
                if (header) {
                    header.classList.remove('active');
                }
            }
        }
    });
}



function setupMenuEvents() {
    // ‰∏ªËèúÂçïÈ°πÁÇπÂáª
    const menuHeaders = document.querySelectorAll('.menu-header');
    menuHeaders.forEach(header => {
        header.addEventListener('click', function(e) {
            toggleMenu(this);
            e.stopPropagation();
        });
    });
    
    // Â≠êËèúÂçïÂ§¥ÈÉ®ÁÇπÂáª
    const submenuHeaders = document.querySelectorAll('.submenu-header');
    submenuHeaders.forEach(header => {
        header.addEventListener('click', function(e) {
            toggleSubMenu(this);
            e.stopPropagation();
        });
    });
    
    // ËèúÂçïÈ°πÈìæÊé•ÁÇπÂáª
    const menuItems = document.querySelectorAll('.submenu-item');
    menuItems.forEach(item => {
        item.addEventListener('click', function(e) {
            // ÁßªÈô§ÊâÄÊúâactiveÁ±ª
            menuItems.forEach(i => i.classList.remove('active'));
            
            // Ê∑ªÂä†activeÁ±ªÂà∞ÂΩìÂâçÈ°π
            this.classList.add('active');
            
            // Ëé∑ÂèñÂ∑•ÂÖ∑Á±ªÂûã
            const tool = this.getAttribute('data-tool');
            
            // ÊâßË°åÁõ∏Â∫îÁöÑÂ∑•ÂÖ∑ÂáΩÊï∞
            if (tool) {
                switchTool(tool);
            }
            
            e.stopPropagation();
        });
    });
    
    // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ËèúÂçïÔºàÁßªÂä®Á´ØÔºâ
    document.addEventListener('click', function(e) {
        if (window.innerWidth <= 768) {
            const sidebar = document.querySelector('.sidebar');
            const isClickInsideSidebar = sidebar.contains(e.target);
            
            if (!isClickInsideSidebar) {
                sidebar.classList.remove('active');
            }
        }
    });
}
            // ‰æßËæπÊ†èÔºàÂ±ïÂºÄÔºâÂàáÊç¢
            // sidebarToggle.addEventListener('click', () => {
            //     sidebar.classList.toggle('collapsed');
            //     mainContent.classList.toggle('sidebar-collapsed');
                
            //     console.log("siderToggle click!");
            //     // ÂàáÊç¢ÊåâÈíÆÂõæÊ†á
            //     const icon = sidebarToggle.querySelector('i');
            //     if (sidebar.classList.contains('collapsed')) {
            //         icon.className = 'fas fa-bars';
            //     } else {
            //         icon.className = 'fas fa-times';
            //     }
            // });
            // //===================================================================================
            // // ‰æßËæπÊ†èËèúÂçïÈ°πÁÇπÂáª‰∫ã‰ª∂
            // menuHeader.forEach(item => {
            //     item.addEventListener('click', function() {
            //         this.classList.toggle('active');
                    
            //         const submenu = this.nextElementSibling;
            //         if(submenu.classList.contains('open')){
            //             submenu.classList.remove('open');
            //         }
            //         else{
            //             document.querySelectorAll('.submenu.open').forEach(openMenu =>{
            //                 if(openMenu != submenu){
            //                     openMenu.classList.remove('open');
            //                     openMenu.previousElementSibling.classList.remove('active');
            //                 }
            //             });
            //             submenu.classList.add('open');
            //         }
            //     });
            // });

            // submenuHeader.forEach(item =>{
            //     item.addEventListener('click',function(){
            //         this.classList.toggle("active");
            //         const sub_submenu = this.nextElementSibling;

            //         if(sub_submenu.classList.contains('open')){
            //             sub_submenu.classList.remove('open');
            //         }
            //         else{
            //             document.querySelectorAll('.sub_submenu.open').forEach(openMenu =>{
            //                 if(openMenu != sub_submenu){
            //                     openMenu.classList.remove('open');
            //                     openMenu.previousElementSibling.classList.remove('active');
            //                 }
            //             });
            //             sub_submenu.classList.add('open');
            //         }
            //     });
            // });



            
            // const submenuItems = document.querySelectorAll('.submenu-item');
            // submenuItems.forEach(item => {
            //     item.addEventListener('click',function(e){
            //         submenuItems.forEach(i => i.classList.remove('active'));
            //         this.classList.add('active');
            //         e.preventDefault();

            //         // const menuText = this.textContent;
            //         // const parentMenu = this.closet('.menu-item').querySelector('.menu-text').textContent;
            //         const tool = item.getAttribute('data-tool');
            //         switchTool(tool);
            //     })
            // });

            // Â∑•ÂÖ∑ÂàáÊç¢ÂáΩÊï∞
            function switchTool(tool) {
                const pageTitle = document.querySelector('.card-title');
                // const pageDesc = document.querySelector('.page-title p');
                
                switch(tool) {
                    case 'EcoliDatabase':
                        pageTitle.textContent = 'Â§ßËÇ†ÊùÜËèåÁîüÁâ©ÂÖÉ‰ª∂‰ªìÂ∫ì';
                        // pageDesc.textContent = 'ÊêúÁ¥¢„ÄÅÁÆ°ÁêÜÂíåÂàÜ‰∫´ÂêàÊàêÁîüÁâ©Â≠¶ÂÖÉ‰ª∂ÔºåÂä†ÈÄüÊÇ®ÁöÑÁ†îÁ©∂‰∏éÂºÄÂèë';
                        showRepositoryContent();
                        break;
                    case 'YeastDatabase':
                        pageTitle.textContent = 'ÈÖµÊØçÁîüÁâ©ÂÖÉ‰ª∂‰ªìÂ∫ì';
                        // pageDesc.textContent = 'ÊêúÁ¥¢„ÄÅÁÆ°ÁêÜÂíåÂàÜ‰∫´ÂêàÊàêÁîüÁâ©Â≠¶ÂÖÉ‰ª∂ÔºåÂä†ÈÄüÊÇ®ÁöÑÁ†îÁ©∂‰∏éÂºÄÂèë';
                        showRepositoryContent();
                        break;
                    case 'MammaliaDatabase':
                        pageTitle.textContent = 'Âì∫‰π≥Âä®Áâ©ÁîüÁâ©ÂÖÉ‰ª∂‰ªìÂ∫ì';
                        // pageDesc.textContent = 'ÊêúÁ¥¢„ÄÅÁÆ°ÁêÜÂíåÂàÜ‰∫´ÂêàÊàêÁîüÁâ©Â≠¶ÂÖÉ‰ª∂ÔºåÂä†ÈÄüÊÇ®ÁöÑÁ†îÁ©∂‰∏éÂºÄÂèë';
                        showRepositoryContent();
                        break;
                    case 'base-designer':
                        showBaseDesigner();
                        break;
                    // case 'color_designer':
                    //     pageTitle.textContent = 'È¢úËâ≤ËÆæËÆ°Â∑•ÂÖ∑';
                    //     pageDesc.textContent = 'Ê†πÊçÆÈúÄÊ±ÇÈ¢úËâ≤ËÆæËÆ°Â∑•ÂÖ∑';
                    //     showColorDesignContent();
                    //     break;
                    case 'logic_designer':
                        showLogicDesignToolsContent();
                        break;
                    case 'create_repo':
                        create_repo();
                        break;
                    case 'create_plate':
                        create_plate();
                        break;
                }
            }

            // ÊòæÁ§∫‰∏çÂêåÂ∑•ÂÖ∑ÁöÑÂÜÖÂÆπ
            // ÊêúÁ¥¢ÁïåÈù¢ÊòæÁ§∫
            function showRepositoryContent() {
                // ÊòæÁ§∫ÈªòËÆ§ÁöÑÊêúÁ¥¢ÁïåÈù¢
                document.querySelector('.main-content').style.display = 'block';
                document.querySelector('.base-design-container').style.display = 'none';
                // document.querySelector('.color-design-container').style.display = 'none';
                document.querySelector('.Logic-designer-container').style.display = 'none';
            }
            //Âü∫Á°ÄËÆæËÆ°ÁïåÈù¢ÊòæÁ§∫
            function showBaseDesigner(){
                console.log("showBaseDesigner");
                document.querySelector('.main-content').style.display = 'none';
                document.querySelector('.base-design-container').style.display = 'block';
                // document.querySelector('.color-design-container').style.display = 'none';
                document.querySelector('.Logic-designer-container').style.display = 'none';
            }

            //È¢úËâ≤ËÆæËÆ°ÁïåÈù¢ÊòæÁ§∫
            // function showColorDesignContent(){
            //     document.querySelector('.search-container').style.display = 'none';
            //     document.querySelector('.base-design-container').style.display = 'none';
            //     // document.querySelector('.color-design-container').style.display = 'block';
            //     document.querySelector('.Logic-designer-container').style.display = 'none';
            // }

            //ÈÄªËæëÈó®ÁïåÈù¢ÊòæÁ§∫
            function showLogicDesignToolsContent() {
                document.querySelector('.main-content').style.display = 'none';
                document.querySelector('.base-design-container').style.display = 'none';
                // document.querySelector('.color-design-container').style.display = 'none';
                document.querySelector('.Logic-designer-container').style.display = 'block';
            }












        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', function() {
            // ÂàùÂßãÂåñÊâÄÊúâÊ†áÁ≠æÈ°µ
            
            renderTable('part',false, currentPages.part);
            renderTable('backbone',false,currentPages.backbone);
            renderTable('plasmid',false,currentPages.plasmid);
            
            // Ê∑ªÂä†‰∏ä‰º†ÊåâÈíÆ‰∫ã‰ª∂ÁõëÂê¨

            //Ê∏≤Êüìselector div
            renderselect();

            

            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const mainContent = document.getElementById('mainContent');
            // const sidebarItems = document.querySelectorAll('.sidebar-item');
            // const menuHeader = document.querySelectorAll('.menu-header');
            // const submenuHeader = document.querySelectorAll(".submenuHeader");
            
            // ‰æßËæπÊ†èÔºàÂ±ïÂºÄÔºâÂàáÊç¢
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('sidebar-collapsed');
                
                console.log("siderToggle click!");
                // ÂàáÊç¢ÊåâÈíÆÂõæÊ†á
                const icon = sidebarToggle.querySelector('i');
                if (sidebar.classList.contains('collapsed')) {
                    icon.className = 'fas fa-bars';
                } else {
                    icon.className = 'fas fa-times';
                }
            });


            
            // function showToolPlaceholder(title, description) {
            //     let placeholder = document.getElementById('tool-placeholder');
            //     if (!placeholder) {
            //         placeholder = document.createElement('div');
            //         placeholder.id = 'tool-placeholder';
            //         placeholder.style.cssText = `
            //             background-color: white;
            //             border-radius: 10px;
            //             box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            //             padding: 40px;
            //             text-align: center;
            //             margin-top: 20px;
            //         `;
            //         mainContent.appendChild(placeholder);
            //     }
                
            //     placeholder.innerHTML = `
            //         <div style="margin-bottom: 20px;">
            //             <i class="fas fa-cog" style="font-size: 3rem; color: #3498db; margin-bottom: 20px;"></i>
            //         </div>
            //         <h2 style="color: #2c3e50; margin-bottom: 15px;">${title}</h2>
            //         <p style="color: #7f8c8d; font-size: 1.1rem; margin-bottom: 30px;">${description}</p>
            //         <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #3498db;">
            //             <p style="color: #6c757d; margin: 0;"><i class="fas fa-info-circle"></i> Ê≠§ÂäüËÉΩÊ≠£Âú®ÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ...</p>
            //         </div>
            //     `;
            // }

            //===================================================================================
            //Âè≥‰∏äËßíÁî®Êà∑‰ø°ÊÅØÂ±ïÁ§∫
            // validationUser();
            // function validationUser(){
            //     fetch("/myapp/val")
            //     .then(response => response.json())
            //     .then(data => {
            //         console.log(data['username']);
            //         if(data['username'] != ""){
            //             document.getElementById('auth-buttons').style.display = 'none';
            //             document.getElementById('user-info').style.display = 'block';
            //             document.getElementById('username-label').innerHTML = data['username'];
            //         }
            //         else{
            //             document.getElementById('auth-buttons').style.display = 'block';
            //             document.getElementById('user-info').style.display = 'none';
            //         }
            //     })
            //     .catch(error => {
            //         alert(error.message);
            //     });
            // }

            //ÂæÖÂºÄÂèëÂäüËÉΩ
            // document.getElementById("UserProfileLabel").addEventListener('click',() =>{
            //     alert("ÊâìÂºÄÁî®Êà∑‰∏ªÈ°µ");
            // });

            //===================================================================================
            // ÁôªÂΩï/Ê≥®ÂÜåÊåâÈíÆÂäüËÉΩ
            // const loginBtn = document.querySelector('.btn-login');
            // const registerBtn = document.querySelector('.btn-register');

            // //ÁôªÂΩï
            // loginBtn.addEventListener('click', () => {
            //     window.location.href = "/myapp/login";
            // });

            // //Ê≥®ÂÜå
            // registerBtn.addEventListener('click', () => {
            //     window.location.href = "/myapp/register";
            // });

            // //ÈÄÄÂá∫ÁôªÂΩï
            // document.getElementById('btn_logout').addEventListener('click', () => {
            //     window.location.href = "/myapp/logout";
            // });


            //===================================================================================
            //ÊêúÁ¥¢ÂäüËÉΩÂÆûÁé∞
            // const searchBtn = document.getElementById('search-button');
            // // $('#search-button').on('click',
            // document.getElementById("search-button").addEventListener('click' ,()=>{
            //     // function(){
            //     tool = document.querySelector(".submenu-item.active").getAttribute('data-tool');
            //     console.log(tool);
            //     if(nameSearch.classList.contains('active')){
            //         var NameKeywords = nameSearch.value;
            //         if(NameKeywords == ""){
            //             alert("ÂÖ≥ÈîÆÂ≠ó‰∏çËÉΩ‰∏∫Á©∫");
            //         }
            //         else{
            //             if(tool == "EcoliDatabase"){
            //                 window.location.href = "/myapp/showEcoli?keywords="+NameKeywords;
            //             }
            //             else if(tool == "YeastDatabase"){
            //                 window.location.href = "/myapp/showYeast?keywords="+NameKeywords;
            //             }
            //             else if(tool == "MammaliaDatabase"){
            //                 window.location.href = "/myapp/showMammalia?keywords="+NameKeywords;
            //             }
            //         }
            //     }
            //     else if(sequenceSearch.classList.contains("active")){
            //         var SequenceKeywords = sequenceSearch.value;
            //         if(SequenceKeywords == ""){
            //             alert("ÂÖ≥ÈîÆÂ≠ó‰∏çËÉΩ‰∏∫Á©∫");
            //         }
            //         else{
            //             if(tool == "EcoliDatabase"){
            //                 window.location.href = "/myapp/showEcoliSeq?Seq="+SequenceKeywords;
            //             }
            //             else if(tool == "YeastDatabase"){
            //                 window.location.href = "/myapp/showYeastSeq?Seq="+SequenceKeywords;
            //             }
            //             else if(tool == "MammaliaDatabase"){
            //                 window.location.href = "/myapp/showMammaliaSeq?Seq="+SequenceKeywords;
            //             }
            //         }
                    
            //     }
            // });

            

            //===================================================================================
            //ÂàõÂª∫‰ªìÂ∫ìÂäüËÉΩÂÆûÁé∞
            const createRepoModal = bootstrap.Modal.getInstance(document.getElementById("modalOverlay-Repo"));
            const cancelBtn = document.getElementById('cancelBtn');
            const confirmBtn = document.getElementById('confirmBtn');
            // const warehouseNameInput = document.getElementById(''warehouseName);
            // const warehouseNoteInput = document.getElementById('warehouseNote');
            const notificationCreateRepo = document.getElementById('notificationCreateRepo');
            const createBtn = document.getElementById('assemblyFileUpload');
            
            //ÊâìÂºÄÂºπÁ™ó
            createBtn.addEventListener('click', () => {
                var assembly_upload = document.getElementById("AssemblyFileInput");
                var assemblyFile = assembly_upload.files;
                createWarehouse(assemblyFile);
                const createRepoModal = bootstrap.Modal.getInstance(document.getElementById("modalOverlay-Repo"));
                createRepoModal.hide();
                console.log("create repo window");
            });
        
            // // ÂÖ≥Èó≠ÂºπÁ™ó
            // function closeModal() {
            //     // modalOverlayRepo.classList.remove('show');
            //     createRepoModal.hide();
            // }
        
            // ÂèñÊ∂àÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            // cancelBtn.addEventListener('click', closeModal());
        
            // ÁÇπÂáªÈÅÆÁΩ©Â±ÇÂÖ≥Èó≠ÂºπÁ™ó
            // createRepoModal.addEventListener('click', function(e) {
            //     if (e.target === createRepoModal) {
            //         createRepoModal.hide();
            //     }
            // });
        
            // Á°ÆËÆ§ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂


            //==========================================================================
            //ÂàõÂª∫PlateÂäüËÉΩÂèäÊòæÁ§∫ÂºπÁ™ó
            const createPlateModal = bootstrap.Modal.getInstance(document.getElementById("modalOverlay-Plate"))
            const cancelBtnPlate = document.getElementById('cancelBtn-Plate');
            // const confirmBtnPlate = document.getElementById('confirmBtn-Plate');
            // const PlateNameInput = document.getElementById('PlateName');
            const notificationCreatePlate = document.getElementById('notificationCreatePlate');
            const modalOverlayPlate_Section = document.getElementById('PlateSection');
            // ÂàõÂª∫‰ªìÂ∫ìPlateÂäüËÉΩ
            const AssemblyStartBtn = document.getElementById('AssemblyStartBtn');
            
            const createAssemblyTaskBtn = document.getElementById("create-plate");

            
            fetch('/WebDatabase/getrepos')
            .then(response => response.json())
            .then(data =>{
                console.log(data);
                if(data.success){
                    data.repo.forEach((eachRepo) =>{
                    console.log(eachRepo.name)
                    const repoOption = document.createElement("option");
                    repoOption.innerText=eachRepo.name;
                    modalOverlayPlate_Section.appendChild(repoOption);
                });
                }else{
                    showNotification(data.message || 'ÂàõÂª∫Â§±Ë¥•',true);
                }
            })
            .catch(error => {
                showNotification("ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï",true);
            })
            

            AssemblyStartBtn.addEventListener('click', () => {
                let wareName = modalOverlayPlate_Section.value.trim();
                assemblyStart(wareName);
                const createPlateModal = bootstrap.Modal.getInstance(document.getElementById("modalOverlay-Plate"))
                createPlateModal.hide();
            });

        
            // ÂèñÊ∂àÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            // cancelBtnPlate.addEventListener('click', closeModalPlate);
        
            // ÁÇπÂáªÈÅÆÁΩ©Â±ÇÂÖ≥Èó≠ÂºπÁ™ó
            // createPlateModal.addEventListener('click', function(e) {
            //     if (e.target === createPlateModal) {
            //         createPlateModal.hide();
            //     }
            // });
        
            // Á°ÆËÆ§ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            // confirmBtnPlate.addEventListener('click', function() {
            //     const repositoryName = modalOverlayPlate_Section.value.trim();
            //     // Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÈáå‰ºöË∞ÉÁî®APIÂàõÂª∫‰ªìÂ∫ì
            //     createPlate(repositoryName);
            // });
        
            // ÊåâEnterÈîÆÁ°ÆËÆ§ÂàõÂª∫
            // PlateNameInput.addEventListener('keypress', function(e) {
            //     if (e.key === 'Enter') {
            //         confirmBtnPlate.click();
            //     }
            // });
            // ÂàõÂª∫PlateÂáΩÊï∞
            // function createPlate(name) {
            // // Ê®°ÊãüAPIË∞ÉÁî®
            //     console.log(`ÂàõÂª∫Plate: ${name}`);
            //     fetch('/WebDatabase/getrepo',{
            //         method: 'POST',
            //         headers:{
            //             'Content-Type':'application/json',
            //         },
            //         body: JSON.stringify({Name:name})
            //     })
            //     .then(response => {
            //         if(response.status == 410){
            //             alert("‰ªìÂ∫ìÂ∑≤ËøáÊúü");
            //         }
            //         return response.json();
            //     })
            //     .then(data => {
            //         if(data.success){
            //             alert("ÂàõÂª∫ÊàêÂäü");
            //             closeModalPlate();
            //             // window.location.href = "/myapp/showPlate?repositoryID="+data.repository;
            //         }
            //         else{
            //             alert(data.message || 'ÂàõÂª∫Â§±Ë¥•');
            //         }
            //     })
            //     .catch(error => {
            //         alert('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï');
            //     });
            // }
        
            // // ÊòæÁ§∫ÈÄöÁü•
            // function showNotificationPlate(message, isError = false) {
            //     notificationCreatePlate.textContent = message;
            
            //     if (isError) {
            //         notificationCreatePlate.classList.add('error');
            //     } else {
            //         notificationCreatePlate.classList.remove('error');
            //     }
            
            //     notificationCreatePlate.classList.add('show');
            
            //     setTimeout(() => {
            //         notificationCreatePlate.classList.remove('show');
            //     }, 3000);
            // }
            

            //Âü∫Êú¨ËÆæËÆ°ÂäüËÉΩË°®ÂçïÊèê‰∫§
            const submitBtn = document.getElementById('design-submit');
            if (submitBtn) {
                submitBtn.addEventListener('click', function() {
                    const species = (document.getElementById('design-species') || {}).value || '';
                    const gene = (document.getElementById('design-gene') || document.getElementById('design-gene') || {}).value || '';
                    const expression = (document.getElementById('design-expression') || {}).value || '';

                    if (!species || !gene || !expression) {
                        alert('ËØ∑ÂÆåÊï¥Â°´ÂÜôË°®Âçï');
                        return;
                    }

                    // ËøôÈáåÂèØÊõøÊç¢‰∏∫ÁúüÊ≠£ÁöÑÊèê‰∫§ÈÄªËæëÔºà‰æãÂ¶ÇfetchÂà∞ÂêéÁ´ØÊé•Âè£Ôºâ
                    alert("‰ª£ÂºÄÂèë");
                    // fetch('/myapp/BasicDesign',{
                    //     method: 'POST',
                    //     headers:{
                    //         'Content-Type':'application/json',
                    //     },
                    //     body: JSON.stringify({species:species,gene:gene,expression:expression})
                    // })
                    // .then(response => response.json())
                    // .then(data => {
                    //     if(data.success){
                    //         //Ëá™Âä®ÂàõÂª∫‰∏Ä‰∏™‰ªìÂ∫ìÔºåÂπ∂‰∏î‰ª•ÁΩëÈ°µÂΩ¢ÂºèËøîÂõûËÆæËÆ°Ë°®Âçï
                    //         alert("ËÆæËÆ°ÂÜÖÂÆπÔºÅ");
                    //     }
                    //     else{
                    //         alert(data.message);
                    //     }
                    // })
                    // .catch(error => {
                    //     alert('ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï');
                    // })
                })
            }

        // Ëé∑ÂèñDOMÂÖÉÁ¥†
        const gateOptions = document.querySelectorAll('.gate-option');
        const notParams = document.getElementById('not-params');
        const andParams = document.getElementById('and-params');
        const orParams = document.getElementById('or-params');
        const nandParams = document.getElementById('nand-params');
        const norParams = document.getElementById('nor-params');
        const gateSymbol = document.getElementById('gateSymbol');
        const gateLabel = document.getElementById('gateLabel');
        const saveButtonlog = document.getElementById('saveButtonlog');
        const resetButton = document.getElementById('resetButton');
        const notificationlog = document.getElementById('notificationlog');
        
        // ÂΩìÂâçÈÄâÊã©ÁöÑÈÄªËæëÈó®Á±ªÂûã
        let selectedGate = 'not';
        
        // ÈÄªËæëÈó®Á±ªÂûãÈÄâÊã©‰∫ã‰ª∂
        gateOptions.forEach(option => {
            option.addEventListener('click', function() {
                // ÁßªÈô§ÊâÄÊúâÊøÄÊ¥ªÁä∂ÊÄÅ
                gateOptions.forEach(opt => opt.classList.remove('active'));
                
                // ËÆæÁΩÆÂΩìÂâç‰∏∫ÊøÄÊ¥ªÁä∂ÊÄÅ
                this.classList.add('active');
                
                // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÈÄªËæëÈó®Á±ªÂûã
                selectedGate = this.dataset.gate;
                
                // Êõ¥Êñ∞ÂèÇÊï∞ÊòæÁ§∫
                updateParameterDisplay();
                
                // Êõ¥Êñ∞È¢ÑËßà
                updatePreview();
            });
        });
        
        // Êõ¥Êñ∞ÂèÇÊï∞ÊòæÁ§∫
        function updateParameterDisplay() {
            // ÈöêËóèÊâÄÊúâÂèÇÊï∞Âå∫Âüü
            notParams.style.display = 'none';
            andParams.style.display = 'none';
            orParams.style.display = 'none';
            nandParams.style.display = 'none';
            norParams.style.display = 'none';
            
            // ÊòæÁ§∫ÂΩìÂâçÈÄâÊã©ÁöÑÂèÇÊï∞Âå∫Âüü
            switch(selectedGate) {
                case 'not':
                    notParams.style.display = 'block';
                    break;
                case 'and':
                    andParams.style.display = 'block';
                    break;
                case 'or':
                    orParams.style.display = 'block';
                    break;
                case 'nand':
                    nandParams.style.display = 'block';
                    break;
                case 'nor':
                    norParams.style.display = 'block';
                    break;
            }
        }
        
        // Êõ¥Êñ∞È¢ÑËßà
        function updatePreview() {
            let symbol = '';
            let label = '';
            
            switch(selectedGate) {
                case 'not':
                    symbol = 'NOT';
                    label = 'ÈùûÈó® - ‰ø°Âè∑ÂèñÂèç';
                    break;
                case 'and':
                    symbol = 'AND';
                    label = '‰∏éÈó® - ÊâÄÊúâËæìÂÖ•‰∏∫ÁúüÊó∂ËæìÂá∫‰∏∫Áúü';
                    break;
                case 'or':
                    symbol = 'OR';
                    label = 'ÊàñÈó® - ‰ªª‰∏ÄËæìÂÖ•‰∏∫ÁúüÊó∂ËæìÂá∫‰∏∫Áúü';
                    break;
                case 'nand':
                    symbol = 'NAND';
                    label = '‰∏éÈùûÈó® - ‰∏éÈó®ÁöÑÂèñÂèç';
                    break;
                case 'nor':
                    symbol = 'NOR';
                    label = 'ÊàñÈùûÈó® - ÊàñÈó®ÁöÑÂèñÂèç';
                    break;
            }
            
            gateSymbol.textContent = symbol;
            gateLabel.textContent = label;
        }
        
        // ‰øùÂ≠òÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        saveButtonlog.addEventListener('click', function() {
            // Êî∂ÈõÜË°®ÂçïÊï∞ÊçÆ
            const gateData = {
                type: selectedGate,
                name: document.getElementById('gateName').value,
                description: document.getElementById('gateDescription').value
            };
        
            // È™åËØÅÊï∞ÊçÆ
            if (!validateGateData(gateData)) {
                alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÈúÄÁöÑÂèÇÊï∞ÔºÅ');
                return;
            }
        });
        
        // ÈáçÁΩÆÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        resetButton.addEventListener('click', function() {
            // ÈáçÁΩÆÊâÄÊúâËæìÂÖ•Â≠óÊÆµ
            document.querySelectorAll('.input-field').forEach(input => {
                input.value = '';
            });
            
            // ÈáçÁΩÆ‰∏∫ÈªòËÆ§ÂÄº
            document.getElementById('andInputs').value = '2';
            document.getElementById('orInputs').value = '2';
            document.getElementById('nandInputs').value = '2';
            document.getElementById('norInputs').value = '2';
            
            // ÈáçÁΩÆÈÄâÊã©‰∏∫ÈùûÈó®
            gateOptions.forEach(opt => opt.classList.remove('active'));
            document.querySelector('.gate-option[data-gate="not"]').classList.add('active');
            selectedGate = 'not';
            updateParameterDisplay();
            updatePreview();
        });
        
        // È™åËØÅÈÄªËæëÈó®Êï∞ÊçÆ
        function validateGateData(data) {
            if (!data.name || !data.description) {
                return false;
            }
            
            switch(data.type) {
                case 'not':
                    if (!data.YMax || !data.YMin || !data.K) {
                        return false;
                    }
                    break;
                case 'and':
                case 'or':
                case 'nand':
                case 'nor':
                    if (!data.inputs || !data.threshold) {
                        return false;
                    }
                    break;
            }
            return true;
        }
        });

        document.getElementById("admin_index").addEventListener('click', function(){
            window.location.href = "/LabDatabase/adminPage";
        })


            // ÁªÑË£ÖÂáΩÊï∞
            async function assemblyStart(warehouseName) {
                if (!warehouseName){
                    alert('ËØ∑ÈÄâÊã©‰ªìÂ∫ìÂêçÁß∞');
                    return;
                }
                const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

                const response = await fetch('/LabDatabase/AssemblyRepo',{
                    method : "POST",
                    headers:{
                        'Content-Type':'application/json',
                        'X-CSRFToken': csrfToken,
                    },
                    body: JSON.stringify({"repositoryName":warehouseName}),
                });
                // .then(response => response.json)
                const result = await response.json();
                console.log(result);
                if(result.task_id){
                    alert(result.message);
                    pollAssemblyTaskStatus(result.task_id,warehouseName);
                }
                else{
                    displayResult(result);
                }
            }

            function pollAssemblyTaskStatus(taskId,warehouseName){
                const pollInterval = setInterval(async () => {
                    try {
                        const response = await fetch(`/LabDatabase/task_status/${taskId}`);
                        const result = await response.json();
                        console.log(result);
                        if(result.status === "completed"){
                            console.log("completed");
                            
                            clearInterval(pollInterval);
                            displayResult(result);

                            window.location.href = `/LabDatabase/getAssembly/${warehouseName}`
                        }
                        else if(result.status === "failed"){
                            console.log("failed");
                            console.log(result);
                            clearInterval(pollInterval);
                            displayError(result.error);
                        }
                    }
                    catch(error){
                        clearInterval(pollInterval);
                        displayError('ËΩÆËØ¢Â§±Ë¥•Ôºö'+error.message);
                    }
                }, 2000);
            }





        
            // ÂàõÂª∫‰ªìÂ∫ìÂáΩÊï∞
            async function createWarehouse(file) {
                if (!file){
                    alert('ËØ∑ÈÄâÊã©Êñá‰ª∂');
                    return;
                }
                let fd = new FormData();
                console.log(file.length);
                fd.append('file',file[0]);
                const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

                const response = await fetch('/LabDatabase/createRepo',{
                    method: 'POST',
                    body:fd,
                    headers:{
                        'X-CSRFToken':csrfToken,
                    },
                });
                // .then(response => response.json)
                const result = await response.json();
                if(result.task_id){
                    alert(result.message);
                    pollTaskStatus(result.task_id);
                }
                else{
                    displayResult(result);
                }
            }
        
            // ÊòæÁ§∫ÈÄöÁü•
            function showNotification(message, isError = false) {
                notificationCreateRepo.textContent = message;
            
                if (isError) {
                    notificationCreateRepo.classList.add('error');
                } else {
                    notificationCreateRepo.classList.remove('error');
                }
            
                notificationCreateRepo.classList.add('show');
            
                setTimeout(() => {
                    notificationCreateRepo.classList.remove('show');
                }, 3000);
            }

        // Ê∏≤ÊüìË°®Ê†º
        function renderTable(type,isSearch,page) {
            console.log("renderTable");
            const tableBody = document.getElementById(`${type}TableBody`);
            const pagination = document.getElementById(`${type}Pagination`);
            const paginationInfo = document.getElementById(`${type}PaginationInfo`);
            let result = {};
            let totalItems = 0;
            let totalPages = 0;
            let currentPage = 1;
            let offset = 0;
            //ÈùûÊêúÁ¥¢Ê∏≤Êüì
            if(isSearch == false){
                if(type === 'part'){
                    fetch(`/LabDatabase/getdata?type=part&page=${page}`)
                    .then(response => response.json())
                    .then(data =>{
                        result = data.data;
                        totalItems = data.pagination.total_count;
                        totalPages = data.pagination.total_pages;
                        currentPage = data.pagination.current_page;
                        offset = data.pagination.offset;
                    
                        tableBody.innerHTML = '';
                        if (totalItems === 0) {
                            tableBody.innerHTML = `
                            <tr>
                                <td colspan="7">
                                    <div class="empty-state">
                                        <div class="empty-icon">üì≠</div>
                                        <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                    </div>
                                </td>
                            </tr>
                        `;
                        } else {
                        // Â°´ÂÖÖË°®Ê†ºÊï∞ÊçÆ
                            result.forEach(item => {
                                const row = document.createElement('tr');
                                let PartType = "";
                                if(item.type === 1){
                                    PartType = "promoter";
                                }
                                else if(item.type === 2){
                                    PartType = "CDS";
                                }
                                else if(item.type === 3){
                                    PartType = "Terminator";
                                }
                                else if(item.type === 4){
                                    PartType = "RBS";
                                }
                                else if(item.type === 5){
                                    PartType = "P+R";
                                }
                                row.setAttribute("id", `part_row_${item.partid}`)
                                row.innerHTML = `
                                    <td>${item.name}</td>
                                    <td>${item.alias}</td>
                                    <td>${PartType}</td>
                                    <td>${item.sourceorganism}</td>
                                    <td>${item.reference}</td>
                                    <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                    <td class="action-cell">
                                        <button class="btn btn-sm btn-outline-primary" onclick="window.location.href='/LabDatabase/part/${item.partid}'">Êü•Áúã</button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifypart/${item.partid}'">ÁºñËæë</button>
                                        <button class="btn btn-sm btn-outline-danger" onclick = "PartDelete(${item.partid})">Âà†Èô§</button>
                                    </td>
                                `;
                                tableBody.appendChild(row);
                            })
                        }
                        // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                        paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                        // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                        pagination.innerHTML = '';
            
                        // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                        const prevLi = document.createElement('li');
                        prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                        prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch}, ${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(prevLi);
            
                        // È°µÁ†ÅÊåâÈíÆ
                        console.log(currentPage);
                        if(totalPages >= 10){
                            if(currentPage + 10 < totalPages) {
                                for (let i = currentPage; i <= currentPage+10; i++) {
                                    console.log(i);
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                            else{
                                for(let i = totalPages - 10; i<=totalPages;i++){
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch}, ${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                        }
                        else{
                            for (let i = 1; i <= totalPages; i++) {
                                const pageLi = document.createElement('li');
                                pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                pagination.appendChild(pageLi);
                            }
                        }
            
                        // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                        const nextLi = document.createElement('li');
                        nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                        nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(nextLi);
                    });
                }
                else if(type === 'backbone'){
                    fetch(`/LabDatabase/getdata?type=backbone&page=${page}`)
                    .then(response => response.json())
                    .then(data =>{
                        console.log(data);
                        result = data.data;
                        totalItems = data.pagination.total_count;
                        totalPages = data.pagination.total_pages;
                        currentPage = data.pagination.current_page;
                        offset = data.pagination.offset;
                        
                        tableBody.innerHTML = '';
                        if (totalItems === 0) {
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        } else {
                            result.forEach(item => {
                                const row = document.createElement('tr');
                                row.setAttribute("id", `backbone_row_${item.id}`)
                                row.innerHTML = `
                                    <td>${item.name}</td>
                                    <td>${item.alias}</td>
                                    <td>${item.marker.join(", ")}</td>
                                    <td>${item.ori.join(", ")}</td>
                                    <td>${item.species}</td>
                                    <td>${item.scar}</td>
                                    <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                    <td class="action-cell">
                                        <button class="btn btn-sm btn-outline-primary" onclick="window.location.href='/LabDatabase/backbone/${item.id}'">Êü•Áúã</button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifybackbone/${item.id}'">ÁºñËæë</button>
                                        <button class="btn btn-sm btn-outline-danger" onclick="DeleteBackbone(${item.id})">Âà†Èô§</button>
                                    </td>
                                `;
                                tableBody.appendChild(row);
                            })
                        }
                        // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                        paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                        // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                        pagination.innerHTML = '';
            
                        // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                        const prevLi = document.createElement('li');
                        prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                        prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(prevLi);
            
                        // È°µÁ†ÅÊåâÈíÆ
                        if(totalPages >= 10){
                            if(currentPage + 10 < totalPages) {
                                for (let i = currentPage; i <= currentPage+10; i++) {
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                            else{
                                for(let i = totalPages - 10; i<=totalPages;i++){
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                        
                        }
                        else{
                            for (let i = 1; i <= totalPages; i++) {
                                const pageLi = document.createElement('li');
                                pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                pagination.appendChild(pageLi);
                            }
                        }
            
                        // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                        const nextLi = document.createElement('li');
                        nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                        nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(nextLi);
                    });
                }
                else if(type === 'plasmid'){
                    fetch(`/LabDatabase/getdata?type=plasmid&page=${page}`)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        result = data.data;
                        totalItems = data.pagination.total_count;
                        totalPages = data.pagination.total_pages;
                        currentPage = data.pagination.current_page;
                        offset = data.pagination.offset;

                        tableBody.innerHTML = '';
                        if (totalItems === 0) {
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        } else {
                            result.forEach(item => {
                                const row = document.createElement('tr');
                                row.setAttribute("id", `plasmid_row_${item.plasmidid}`)
                                var ori_list = item.ori_info;
                                var marker_list = item.marker_info;
                                console.log(ori_list);
                                console.log(marker_list);
                                row.innerHTML = `
                                    <td>${item.name}</td>
                                    <td>${item.alias}</td>
                                    <td>${item.ori_info.join(", ")}</td>
                                    <td>${item.marker_info.join(", ")}</td>
                                    <td>${item.level}</td>
                                    <td>${item.scar}</td>
                                    <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                    <td class="action-cell">
                                        <button class="btn btn-sm btn-outline-primary" onclick="window.location.href='/LabDatabase/plasmid/${item.plasmidid}'">Êü•Áúã</button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifyplasmid/${item.plasmidid}'">ÁºñËæë</button>
                                        <button class="btn btn-sm btn-outline-danger" onclick = "PlasmidDelete(${item.plasmidid})">Âà†Èô§</button>
                                    </td>
                                `;
                                tableBody.appendChild(row);
                            })
                        }
                        // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                        paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                        // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                        pagination.innerHTML = '';
            
                        // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                        const prevLi = document.createElement('li');
                        prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                        prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(prevLi);
            
                        // È°µÁ†ÅÊåâÈíÆ
                        if(totalPages >= 10){
                            if(currentPage + 10 < totalPages) {
                                for (let i = currentPage; i <= currentPage+10; i++) {
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                            else{
                                for(let i = totalPages - 10; i<=totalPages;i++){
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                        
                        }
                        else{
                            for (let i = 1; i <= totalPages; i++) {
                                const pageLi = document.createElement('li');
                                pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                pagination.appendChild(pageLi);
                            }
                        }
                    
            
                        // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                        const nextLi = document.createElement('li');
                        nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                        nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(nextLi);
                    });
                }
            }

            //ÊêúÁ¥¢Ê∏≤Êüì
            else{
                const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                if(type === 'part'){
                    const request_body = {'SearchType':"part",'name':document.getElementById('PartSearchInput').value,
                    'Type':document.getElementById('PartTypeSelect').options[document.getElementById('PartTypeSelect').selectedIndex].text,
                    'Enzyme':document.getElementById('PartEnzyme').options[document.getElementById('PartEnzyme').selectedIndex].text,
                    'Scar':document.getElementById('PartScar').options[document.getElementById('PartScar').selectedIndex].text,
                    'page' : page, 'page_size':10}
                    fetch(`/LabDatabase/filterdata`,{
                        method:'POST',
                        body: JSON.stringify(request_body),
                        headers:{
                            'X-CSRFToken':csrfToken,
                            'Content-Type':"application/json",
                        },
                    })
                    .then(response => response.json())
                    .then(data =>{
                        if(data.success){
                            result = data.data;
                            totalItems = data.pagination.total_count;
                            totalPages = data.pagination.total_pages;
                            currentPage = data.pagination.current_page;
                            offset = data.pagination.offset;
                            
                            tableBody.innerHTML = '';
                            if (totalItems === 0) {
                                tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                                `;
                            } else {
                            // Â°´ÂÖÖË°®Ê†ºÊï∞ÊçÆ
                                result.forEach(item => {
                                    const row = document.createElement('tr');
                                    row.setAttribute("id", `part_row_${item.partid}`)
                                    let PartType = "";
                                    if(item.type === 1){
                                        PartType = "promoter";
                                    }
                                    else if(item.type === 2){
                                        PartType = "CDS";
                                    }
                                    else if(item.type === 3){
                                        PartType = "Terminator";
                                    }
                                    else if(item.type === 4){
                                        PartType = "RBS";
                                    }
                                    else if(item.type === 5){
                                        PartType = "P+R";
                                    }
                                    row.innerHTML = `
                                        <td>${item.name}</td>
                                        <td>${item.alias}</td>
                                        <td>${PartType}</td>
                                        <td>${item.sourceorganism}</td>
                                        <td>${item.reference}</td>
                                        <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                        <td class="action-cell">
                                            <button class="btn btn-sm btn-outline-primary"  onclick="window.location.href='/LabDatabase/part/${item.partid}'">Êü•Áúã</button>
                                            <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifypart/${item.partid}'">ÁºñËæë</button>
                                            <button class="btn btn-sm btn-outline-danger" onclick = "DeletePart(${item.partid})">Âà†Èô§</button>
                                        </td>
                                        `;
                                    tableBody.appendChild(row);
                                })
                            }
                            // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                            paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                            // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                            pagination.innerHTML = '';
            
                            // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                            const prevLi = document.createElement('li');
                            prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                            prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch}, ${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                            pagination.appendChild(prevLi);
            
                            // È°µÁ†ÅÊåâÈíÆ
                            console.log(currentPage);
                            if(totalPages >= 10){
                                if(currentPage + 10 < totalPages) {
                                    for (let i = currentPage; i <= currentPage+10; i++) {
                                        console.log(i);
                                        const pageLi = document.createElement('li');
                                        pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                        pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                        pagination.appendChild(pageLi);
                                    }
                                }
                                else{
                                    for(let i = totalPages - 10; i<=totalPages;i++){
                                        const pageLi = document.createElement('li');
                                        pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                        pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch}, ${i})">${i}</a>`;
                                        pagination.appendChild(pageLi);
                                    }
                                }
                            }
                            else{
                                for (let i = 1; i <= totalPages; i++) {
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
            
                            // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                            const nextLi = document.createElement('li');
                            nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                            nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                            pagination.appendChild(nextLi);
                        }
                        else{
                            tableBody.innerHTML = '';
                            tableBody.innerHTML = `
                            <tr>
                                <td colspan="7">
                                    <div class="empty-state">
                                        <div class="empty-icon">üì≠</div>
                                        <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                    </div>
                                </td>
                            </tr>
                        `;
                        }
                    });
                }
                else if(type === 'backbone'){
                    // let fd = new FormData();
                    // fd.append('SearchType','backbone');
                    // fd.append('name',document.getElementById('BackboneSearchInput').innerText);
                    // fd.append('Ori',document.getElementById('OriSelect').innerText);
                    // fd.append('Marker',document.getElementById('MarkerSelect').innerText);
                    // fd.append('Enzyme',document.getElementById('BackboneEnzyme').innerText);
                    // fd.append('Scar',document.getElementById('BackboneScar').innerText);
                    // fd.append('page',page);
                    // fd.append('page_size',10);
                    const request_body = {"SearchType":'backbone',"name":document.getElementById('BackboneSearchInput').value,
                    "Ori":document.getElementById("OriSelect").options[document.getElementById("OriSelect").selectedIndex].text,
                    "Marker":document.getElementById("MarkerSelect").options[document.getElementById("MarkerSelect").selectedIndex].text,
                    "Enzyme":document.getElementById("BackboneEnzyme").options[document.getElementById("BackboneEnzyme").selectedIndex].text,
                    "Scar":document.getElementById("BackboneScar").options[document.getElementById("BackboneScar").selectedIndex].text,
                    "page":page, "page_size":10}

                    fetch(`/LabDatabase/filterdata`,{
                        method:'POST',
                        body: JSON.stringify(request_body),
                        headers:{
                            'X-CSRFToken':csrfToken,
                            'Content-Type':"application/json",
                        }
                    })
                    .then(response => response.json())
                    .then(data =>{
                        if(data.success){

                        console.log(data);
                        result = data.data;
                        totalItems = data.pagination.total_count;
                        totalPages = data.pagination.total_pages;
                        currentPage = data.pagination.current_page;
                        offset = data.pagination.offset;
                        // scar = document.getElementById('BackboneScar').options[document.getElementById('BackboneScar').selectedIndex].text
                        tableBody.innerHTML = '';
                        if (totalItems === 0) {
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        } else {
                            result.forEach(item => {
                                const row = document.createElement('tr');
                                row.setAttribute("id", `backbone_row_${item.id}`)
                                row.innerHTML = `
                                    <td>${item.name}</td>
                                    <td>${item.alias}</td>
                                    <td>${item.marker.join(", ")}</td>
                                    <td>${item.ori.join(", ")}</td>
                                    <td>${item.species}</td>
                                    <td>${item.scar}</td>
                                    <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                    <td class="action-cell">
                                        <button class="btn btn-sm btn-outline-primary" onclick="window.location.href='/LabDatabase/backbone/${item.id}'">Êü•Áúã</button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifybackbone/${item.id}'">ÁºñËæë</button>
                                        <button class="btn btn-sm btn-outline-danger" onclick = "DeleteBackbone(${item.id})">Âà†Èô§</button>
                                    </td>
                                `;
                                tableBody.appendChild(row);
                            })
                        }
                        // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                        paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                        // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                        pagination.innerHTML = '';
            
                        // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                        const prevLi = document.createElement('li');
                        prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                        prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(prevLi);
            
                        // È°µÁ†ÅÊåâÈíÆ
                        if(totalPages >= 10){
                            if(currentPage + 10 < totalPages) {
                                for (let i = currentPage; i <= currentPage+10; i++) {
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                            else{
                                for(let i = totalPages - 10; i<=totalPages;i++){
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                        
                        }
                        else{
                            for (let i = 1; i <= totalPages; i++) {
                                const pageLi = document.createElement('li');
                                pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                pagination.appendChild(pageLi);
                            }
                        }
            
                        // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                        const nextLi = document.createElement('li');
                        nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                        nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(nextLi);
                        }
                        else{
                            tableBody.innerHTML = '';
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        }
                    });
                }
                else if(type === 'plasmid'){
                    // const fd = new FormData();
                    // fd.append('SearchType','plasmid');
                    // fd.append('name',docuemnt.getElementById('PlasmidSearchInput').innerText);
                    // fd.append('OriClone',document.getElementById('OriCloneSelect').innerText);
                    // fd.append('MarkerClone',document.getElementById('MarkerCloneSelect').innerText);
                    // fd.append('OriHost',document.getElementById('OriHostSelect').innerText);
                    // fd.append('MarkerHost',document.getElementById('MarkerHostSelect').innerText);
                    // fd.append('Enzyme',document.getElementById('PlasmidEnzyme').innerText);
                    // fd.append('Scar',document.getElementById('PlasmidScar').innerText);
                    // fd.append('page',page);
                    // fd.append('page_size',10);
                    const request_body = {"SearchType":"plasmid", 'name':document.getElementById("PlasmidSearchInput").value,
                                    "Ori" : document.getElementById("OriSelectPlasmid").options[document.getElementById("OriSelectPlasmid").selectedIndex].text,
                                    "Marker" : document.getElementById("MarkerSelectPlasmid").options[document.getElementById("MarkerSelectPlasmid").selectedIndex].text,
                                    "Enzyme" : document.getElementById('PlasmidEnzyme').options[document.getElementById('PlasmidEnzyme').selectedIndex].text,
                                    "Scar" : document.getElementById('PlasmidScar').options[document.getElementById('PlasmidScar').selectedIndex].text,
                                    "page" : page, "page_size" : 10}
                    fetch(`/LabDatabase/filterdata`,{
                        method:'POST',
                        body: JSON.stringify(request_body),
                        headers:{
                            'X-CSRFToken':csrfToken,
                            'Content-Type':"application/json",
                        }
                    })
                    .then(response => response.json())
                    .then(data =>{
                        console.log(data);
                        result = data.data;
                        totalItems = data.pagination.total_count;
                        totalPages = data.pagination.total_pages;
                        currentPage = data.pagination.current_page;
                        offset = data.pagination.offset;
                        // scar = data.scar;
                        // scar = document.getElementById('PlasmidScar').options[document.getElementById('PlasmidScar').selectedIndex].text;
                        tableBody.innerHTML = '';
                        if (totalItems === 0) {
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="7">
                                        <div class="empty-state">
                                            <div class="empty-icon">üì≠</div>
                                            <div>Ê≤°ÊúâÊâæÂà∞Êï∞ÊçÆ</div>
                                        </div>
                                    </td>
                                </tr>
                            `;
                        } else {
                            result.forEach(item => {
                                const row = document.createElement('tr');
                                row.setAttribute("id", `plasmid_row_${item.plasmidid}`)
                                row.innerHTML = `
                                    <td>${item.name}</td>
                                    <td>${item.alias}</td>
                                    <td>${item.ori_info.join(", ")}</td>
                                    <td>${item.marker_info.join(", ")}</td>
                                    <td>${item.level}</td>
                                    <td>${item.scar}</td>
                                    <td><span class="status-badge ${item.tag === 'normal' ? 'status-active' : 'status-inactive'}">${item.tag === 'normal' ? 'Ê≠£Â∏∏' : 'ÈùûÊ≠£Â∏∏'}</span></td>
                                    <td class="action-cell">
                                        <button class="btn btn-sm btn-outline-primary" onclick="window.location.href='/LabDatabase/plasmid/${item.plasmidid}'">Êü•Áúã</button>
                                        <button class="btn btn-sm btn-outline-secondary" onclick="window.location.href='/LabDatabase/modifyplasmid/${item.plasmidid}'">ÁºñËæë</button>
                                        <button class="btn btn-sm btn-outline-danger" onclick = "DeletePlasmid(${item.plasmidid})">Âà†Èô§</button>
                                    </td>
                                `;
                                tableBody.appendChild(row);
                            })
                        }
                        // Êõ¥Êñ∞ÂàÜÈ°µ‰ø°ÊÅØ
                        paginationInfo.textContent = `ÊòæÁ§∫ ${totalItems} Êù°ËÆ∞ÂΩï‰∏≠ÁöÑ ${offset} Âà∞ ${offset+10} Êù°`;
            
                        // ÁîüÊàêÂàÜÈ°µÊéß‰ª∂
                        pagination.innerHTML = '';
            
                        // ‰∏ä‰∏ÄÈ°µÊåâÈíÆ
                        const prevLi = document.createElement('li');
                        prevLi.className = `page-item ${page === 1 ? 'disabled' : ''}`;
                        prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page - 1})">‰∏ä‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(prevLi);
            
                        // È°µÁ†ÅÊåâÈíÆ
                        if(totalPages >= 10){
                            if(currentPage + 10 < totalPages) {
                                for (let i = currentPage; i <= currentPage+10; i++) {
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}', ${isSearch},${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                            else{
                                for(let i = totalPages - 10; i<=totalPages;i++){
                                    const pageLi = document.createElement('li');
                                    pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                    pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                    pagination.appendChild(pageLi);
                                }
                            }
                        
                        }
                        else{
                            for (let i = 1; i <= totalPages; i++) {
                                const pageLi = document.createElement('li');
                                pageLi.className = `page-item ${i === page ? 'active' : ''}`;
                                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${i})">${i}</a>`;
                                pagination.appendChild(pageLi);
                            }
                        }
                    
            
                        // ‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                        const nextLi = document.createElement('li');
                        nextLi.className = `page-item ${page === totalPages ? 'disabled' : ''}`;
                        nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage('${type}',${isSearch} ,${page + 1})">‰∏ã‰∏ÄÈ°µ</a>`;
                        pagination.appendChild(nextLi);
                    });
                }
            }
            
        }

        // ÂàáÊç¢È°µÈù¢
        function changePage(type,isSearch,newPage) {
            currentPage = newPage;
            renderTable(type, isSearch,newPage);
        }

        function renderselect(){
            const PartScar = document.getElementById('PartScar');
            const OriSelect = document.getElementById('OriSelect');
            const MarkerSelect = document.getElementById('MarkerSelect');
            const BackboneScar = document.getElementById('BackboneScar');
            const OriSelectPlasmid = document.getElementById('OriSelectPlasmid');
            const MarkerSelectPlasmid = document.getElementById('MarkerSelectPlasmid');
            const PlasmidScar = document.getElementById('PlasmidScar');
            //PartScarSelect
            fetch('/WebDatabase/getPartScarList')
            .then(response => response.json())
            .then(data =>{
                if(data.success){
                    let partscar = data.data;
                    partscar.forEach(item =>{
                        const scaroption = document.createElement('option');
                        scaroption.innerText = item;
                        PartScar.appendChild(scaroption);
                    });
                }
            });
            //Backbone Ori Select
            fetch('/WebDatabase/getBackboneValueList/ori')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let orilist = data.data;
                    console.log(orilist);
                    orilist.forEach(item => {
                        const orioption = document.createElement('option');
                        orioption.innerText = item;
                        OriSelect.appendChild(orioption);
                    })
                }
            });
            //Backbone Marker Select
            fetch('/WebDatabase/getBackboneValueList/marker')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let markerlist = data.data;

                    markerlist.forEach(item => {
                        const markeroption = document.createElement('option');
                        markeroption.innerText = item;
                        MarkerSelect.appendChild(markeroption);
                    })
                }
            });
            //Backbone Scar Select
            fetch('/WebDatabase/getBackboneScarList')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let Backbonescar = data.data;
                    Backbonescar.forEach(item =>{
                        const scaroption = document.createElement('option');
                        scaroption.innerText = item;
                        BackboneScar.appendChild(scaroption);
                    });
                }
            });

            //Plasmid Ori Clone Select
            fetch('/WebDatabase/getPlasmidValueList/ori')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let PlasmidOri = data.data;
                    PlasmidOri.forEach(item =>{
                        const orioption = document.createElement('option');
                        orioption.innerText = item;
                        OriSelectPlasmid.appendChild(orioption);
                    });
                }
            });

            //Plasmid Marker Clone Select
            fetch('/WebDatabase/getPlasmidValueList/marker')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let PlasmidMarker = data.data;
                    PlasmidMarker.forEach(item =>{
                        const Markeroption = document.createElement('option');
                        Markeroption.innerText = item;
                        MarkerSelectPlasmid.appendChild(Markeroption);
                    });
                }
            });


            //Plasmid Scar Select
            fetch('/WebDatabase/getPlasmidScarList')
            .then(response => response.json())
            .then(data => {
                if(data.success){
                    let Plasmidscarlist = data.data;
                    Plasmidscarlist.forEach(item =>{
                        const PlasmidScarOption = document.createElement('option');
                        PlasmidScarOption.innerText = item;
                        PlasmidScar.appendChild(PlasmidScarOption);
                    });
                }
            });
        }

        function DeletePart(partid){
            const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

            var confirmDelete = confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ÂêóÔºü");
            if( !confirmDelete){
                event.preventDefault();
            }
            else{
                let request_body = {"partid":partid}

                fetch(`/LabDatabase/deletepart`,{
                    method:'POST',
                    body:JSON.stringify(request_body),
                    headers:{
                        'X-CSRFToken':csrfToken,
                        'Content-Type':"application/json",
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if(data.success){
                        alert("Âà†Èô§ÊàêÂäü");
                        document.getElementById(`part_row_${partid}`).remove();

                    }
                    else{
                        alert(data.message);
                    }
                });
            }
            
        }

        function DeleteBackbone(Backboneid){
            const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

            var confirmDelete = confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ÂêóÔºü");
            if( !confirmDelete){
                event.preventDefault();
            }
            else{
                let request_body = {"backboneid":Backboneid}
                fetch(`/LabDatabase/deletebackbone`,{
                    method:'POST',
                    body:JSON.stringify(request_body),
                    headers:{
                        'X-CSRFToken':csrfToken,
                        'Content-Type':"application/json",
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if(data.success){
                        alert("Âà†Èô§ÊàêÂäü");
                        document.getElementById(`backbone_row_${Backboneid}`).remove();

                    }
                    else{
                        alert(data.message);
                    }
                });
            }
        }
        
        function DeletePlasmid(Plasmidid){
            const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

            var confirmDelete = confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ÂêóÔºü");
            if( !confirmDelete){
                event.preventDefault();
            }
            else{
                let request_body = {"Plasmidid":Plasmidid, "CurrentPath":window.location.href}
                fetch(`/LabDatabase/deleteplasmid`,{
                    method:'POST',
                    body:JSON.stringify(request_body),
                    headers:{
                        'X-CSRFToken':csrfToken,
                        'Content-Type':"application/json",
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if(data.success){
                        alert("Âà†Èô§ÊàêÂäü");
                        document.getElementById(`plasmid_row_${Plasmidid}`).remove();
                    }
                    else{
                        alert(data.message);
                    }
                });
            }
        }


        
        // // ÂÖ≥Èó≠ÂºπÁ™ó
        // function closeModalPlate() {
        //     const createPlateModal = bootstrap.Modal.getInstance(document.getElementById("modalOverlay-Plate"))
        //     createPlateModal.hide();
        // }
    </script>
</html>